(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const ze={zh:{title:"é£Ÿä¹œå¥½",subtitle:"å””çŸ¥é£Ÿå’©ï¼Ÿç­‰æˆ‘å¹«ä½ æ€ï¼",distanceTitle:"æƒ³è¡Œå¹¾è€ï¼Ÿ ðŸš¶",priceTitle:"æƒ³é£Ÿå’©åƒ¹ä½ï¼Ÿ ðŸ’°",filterTitle:"è€Œå®¶æƒ³é£Ÿå’©ï¼Ÿ",filterModeWhitelist:"è€Œå®¶æƒ³é£Ÿå’©ï¼ŸðŸ˜‹",filterModeBlacklist:"è€Œå®¶å””æƒ³é£Ÿå’©ï¼ŸðŸ™…â€â™‚ï¸",filterToggleWhitelist:"è½‰åŽ»ï¼šæƒ³é£Ÿæ¨¡å¼",filterToggleBlacklist:"è½‰åŽ»ï¼šå””æƒ³é£Ÿæ¨¡å¼",findBtn:"å¹«æˆ‘æ€ï¼âœ¨",openMaps:"ðŸ—ºï¸ å–º Google Maps æ‰“é–‹",retry:"ðŸŽ² å””å¤šä¸­æ„ï¼ŸæŠ½éŽé–“ï¼",backBtn:"ðŸ  è¿”åŽ»ä¸»é ",loading:"æœå°‹ç·Šé™„è¿‘å¥½å˜¢é£Ÿ... ðŸ”",noResults:"é™„è¿‘æµå””åˆ°é–‹é–€å˜…é¤å»³ï¼Œè©¦ä¸‹æµé å•²ï¼Ÿ ðŸ”",noFilteredResultsWhitelist:"æµå””åˆ°ç¬¦åˆæ¢ä»¶å˜…é¤å»³ï¼Œè©¦ä¸‹æ€å¤šå¹¾å€‹ã€Œè€Œå®¶æƒ³é£Ÿå’©ã€ï¼ŸðŸ”",noFilteredResultsBlacklist:"æµå””åˆ°ç¬¦åˆæ¢ä»¶å˜…é¤å»³ï¼Œè©¦ä¸‹èª¿æ•´ä¸‹ã€Œè€Œå®¶å””æƒ³é£Ÿå’©ã€ï¼ŸðŸ”",noFilteredResults:"æµå””åˆ°ç¬¦åˆç¯©é¸æ¢ä»¶å˜…é¤å»³ï¼Œè©¦ä¸‹èª¿æ•´ä¸‹ç¯©é¸å™¨ï¼ŸðŸ”",geoError:"æ‹Žå””åˆ°ä½ å€‹ä½ç½®ï¼Œè«‹æª¢æŸ¥ä¸‹æ¬Šé™ã€‚ðŸ“",noGeo:"ä½ å€‹ Browser æ‹Žå””åˆ°å®šä½è³‡è¨Šå–Žã€‚ðŸ“",locationTitle:"æƒ³æµé‚Šé ­ï¼Ÿ ðŸ“",searchPlaceholder:"ðŸ” æœå°‹åœ°é»ž",useCurrentLocation:"ðŸ“ ä½¿ç”¨ç•¶å‰ä½ç½®",installBtn:"å®‰è£ App ðŸ“²",iosInstallText:"æ’³å…¥åŽ»ç‡ã€Œå®‰è£ Appã€æ•™å­¸ ðŸ“²",iosInstallAlert:`æƒ³å¥½ä¼¼ App å’ç”¨ã€Œé£Ÿä¹œå¥½ã€ï¼Ÿ

1. æ’³ç€è¦½å™¨åº•éƒ¨åˆ†äº«é¸å–® (æ­£æ–¹å½¢å‘ä¸Šç®­é ­)
2. å‘ä¸ŠæŽƒä¸¦æ’³è¿”ã€ŒåŠ å…¥ä¸»ç•«é¢ã€(Add to Home Screen)

æžæŽ‚ï¼âœ¨`,linkCopied:"Copy å’—æ¢ Link å–‡ï¼ðŸ“‹",categories:{chinese:"ðŸš ä¸­é¤",japanese:"ðŸ£ æ—¥æœ¬èœ",korean:"ðŸ‡°ðŸ‡· éŸ“åœ‹èœ",western:"ðŸ• è¥¿é¤",se_asian:"ðŸ² æ±å—äºž",indian_middle_east:"ðŸ•Œ å°åº¦/ä¸­æ±",noodles:"ðŸœ ç²‰éºµ",rice_bento:"ðŸ± é£¯/å®šé£Ÿ/ä¾¿ç•¶",sushi_sashimi:"ðŸ£ å£½å¸/åˆºèº«",burger_pizza:"ðŸ• æ¼¢å ¡/è–„é¤…",hotpot_bbq:"ðŸ”¥ ç«é‹/ç‡’çƒ¤",dim_sum:"ðŸ¥Ÿ é»žå¿ƒ/é£²èŒ¶",fine_dining_buffet:"ðŸ¥‚ é«˜æª”/è‡ªåŠ©é¤",all_day_brunch:"ðŸ³ All-day Brunch",bar_izakaya:"ðŸ¹ é…’å§/å±…é…’å±‹",spicy:"ðŸŒ¶ï¸ è¾£å˜¢",dessert:"ðŸ§ ç”œå“/ç³–æ°´",fast_food:"ðŸ” å¿«é¤/å°é£Ÿ",healthy_vege:"ðŸ¥¦ ç´ é£Ÿ/å¥åº·"},unknownName:"åç¨±ä¸è©³",noAddress:"åœ°å€ä¸è©³",ratingNew:"â­ æ–°é–‹å¼µï¼",noHoursInfo:"å†‡å¯«å¹¾é»žé–‹é–€",priceFree:"å…è²»",walkMins:"ðŸš¶ æ­¥è¡Œç´„ ${mins} åˆ†é˜",shareBtn:"ðŸ“¤ Shareæ¯”æœ‹å‹",shareText:"æˆ‘å–ºã€Œé£Ÿä¹œå¥½ã€æŠ½ä¸­å’—å‘¢é–“ï¼š${name}ï¼ä¸€é½ŠåŽ»è©¦ä¸‹ï¼ŸðŸ¥—",includeClosed:"åŒ…å«å·²é—œé–€é¤å»³ ðŸŒ™",excludeClosed:"åªé¸ç‡Ÿæ¥­ä¸­é¤å»³ â˜€ï¸",reviews:"é£Ÿè©•",viewAllReviews:"æŸ¥çœ‹å…¨éƒ¨ ðŸ’¬",photosTitle:"ç›¸ç‰‡",viewAllPhotos:"æŸ¥çœ‹å…¨éƒ¨ ðŸ“¸"},en:{title:"What to Eat",subtitle:"Don't know? Let me pick!",distanceTitle:"How far? ðŸš¶",priceTitle:"Budget? ðŸ’°",filterTitle:"I want to eat...",filterModeWhitelist:"I want to eat... ðŸ˜‹",filterModeBlacklist:"No thanks to... ðŸ™…â€â™‚ï¸",filterToggleWhitelist:"Switch to: Cravings",filterToggleBlacklist:"Switch to: No Thanks",findBtn:"Pick for me! âœ¨",openMaps:"ðŸ—ºï¸ Open in Google Maps",retry:"ðŸŽ² Not this one? Re-roll!",backBtn:"ðŸ  Back to Home",loading:"Searching for delicious food... ðŸ”",noResults:"Nothing's open nearby. Try searching further out? ðŸ”",noFilteredResultsWhitelist:"No restaurants match your filters. Try picking more items in 'What do you want'? ðŸ”",noFilteredResultsBlacklist:"No restaurants match your filters. Try adjusting 'What do you NOT want'? ðŸ”",noFilteredResults:"No restaurants match your filters. Try adjusting them! ðŸ”",geoError:"I can't get your location. Please check your permissions. ðŸ“",noGeo:"Your browser doesn't support geolocation. ðŸ“",locationTitle:"Where to eat? ðŸ“",searchPlaceholder:"ðŸ” Search Location",useCurrentLocation:"ðŸ“ Use Current Location",installBtn:"Install App ðŸ“²",iosInstallText:"How to Install App ðŸ“²",iosInstallAlert:`Want to use 'What to Eat' like an App?

1. Tap the Share button in Safari (square with up arrow)
2. Scroll down and tap 'Add to Home Screen'

All set! âœ¨`,linkCopied:"Link copied! ðŸ“‹",categories:{chinese:"ðŸš Chinese",japanese:"ðŸ£ Japanese",korean:"ðŸ‡°ðŸ‡· Korean",western:"ðŸ• Western",se_asian:"ðŸ² SE Asian",indian_middle_east:"ðŸ•Œ Indian/Middle East",noodles:"ðŸœ Noodles",rice_bento:"ðŸ± Rice/Bento",sushi_sashimi:"ðŸ£ Sushi/Sashimi",burger_pizza:"ðŸ• Burger/Pizza",hotpot_bbq:"ðŸ”¥ Hotpot/BBQ",dim_sum:"ðŸ¥Ÿ Dim Sum",fine_dining_buffet:"ðŸ¥‚ Fine Dining/Buffet",all_day_brunch:"ðŸ³ All-day Brunch",bar_izakaya:"ðŸ¹ Bar/Izakaya",spicy:"ðŸŒ¶ï¸ Spicy",dessert:"ðŸ§ Dessert",fast_food:"ðŸ” Fast Food",healthy_vege:"ðŸ¥¦ Healthy/Vege"},unknownName:"Unknown",noAddress:"Address Unknown",ratingNew:"â­ New!",noHoursInfo:"No opening hours info",priceFree:"Free",walkMins:"ðŸš¶ ${mins} min walk",shareBtn:"ðŸ“¤ Share",shareText:"I picked this on What to Eat: ${name}! Wanna go? ðŸ¥—",includeClosed:"Includes Closed Restaurants ðŸŒ™",excludeClosed:"Open Restaurants Only â˜€ï¸",reviews:"Reviews",viewAllReviews:"View All ðŸ’¬",photosTitle:"Photos",viewAllPhotos:"View All ðŸ“¸"},ja:{title:"ãƒ¡ã‚·æ±º",subtitle:"è¿·ã£ãŸã‚‰ã€ç§ã«é¸ã°ã›ã¦ï¼",distanceTitle:"ã©ã®ãã‚‰ã„æ­©ãï¼Ÿ ðŸš¶",priceTitle:"äºˆç®—ã¯ã©ã®ãã‚‰ã„ï¼Ÿ ðŸ’°",filterTitle:"ä½•ãŒé£Ÿã¹ãŸã„ï¼Ÿ",filterModeWhitelist:"ä½•ãŒé£Ÿã¹ãŸã„ï¼Ÿ ðŸ˜‹",filterModeBlacklist:"é£Ÿã¹ãŸããªã„ã‚‚ã®ã¯ï¼Ÿ ðŸ™…â€â™‚ï¸",filterToggleWhitelist:"é£Ÿã¹ãŸã„ãƒ¢ãƒ¼ãƒ‰ã¸",filterToggleBlacklist:"é£Ÿã¹ãŸããªã„ãƒ¢ãƒ¼ãƒ‰ã¸",findBtn:"ãŠä»»ã›ï¼âœ¨",openMaps:"ðŸ—ºï¸ Googleãƒžãƒƒãƒ—ã§é–‹ã",retry:"ðŸŽ² ä»–ã®ãŒã„ã„ï¼",backBtn:"ðŸ  ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹",loading:"ç¾Žå‘³ã—ã„åº—ã‚’æŽ¢ã—ä¸­... ðŸ”",noResults:"è¿‘ãã«é–‹ã„ã¦ã‚‹åº—ãŒãªã„ã¿ãŸã„ã€‚ã‚‚ã†å°‘ã—é ãã™ã‚‹ï¼Ÿ ðŸ”",noFilteredResultsWhitelist:"æ¡ä»¶ã«åˆã†åº—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã€Œä½•ãŒé£Ÿã¹ãŸã„ã€ã‚’èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ðŸ”",noFilteredResultsBlacklist:"æ¡ä»¶ã«åˆã†åº—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã€Œé£Ÿã¹ãŸããªã„ã€ã‚’èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ðŸ”",noFilteredResults:"æ¡ä»¶ã«åˆã†åº—ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’èª¿æ•´ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ ðŸ”",geoError:"ä½ç½®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã€‚æ¨©é™ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ ðŸ“",noGeo:"ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚ ðŸ“",locationTitle:"ã©ã®è¾ºã§é£Ÿã¹ã‚‹ï¼Ÿ ðŸ“",searchPlaceholder:"ðŸ” å ´æ‰€ã‚’æ¤œç´¢",useCurrentLocation:"ðŸ“ ç¾åœ¨åœ°ã‚’ä½¿ç”¨",installBtn:"ã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ðŸ“²",iosInstallText:"ã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³• ðŸ“²",iosInstallAlert:`ã€Œä½•é£Ÿã¹ã‚‹ï¼Ÿã€ã‚’ã‚¢ãƒ—ãƒªã®ã‚ˆã†ã«ä½¿ã†æ–¹æ³•ï¼š

1. Safari ã®å…±æœ‰ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆå››è§’ã«ä¸ŠçŸ¢å°ï¼‰ã‚’ã‚¿ãƒƒãƒ—
2. ä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ã€Œãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã€ã‚’ã‚¿ãƒƒãƒ—

å®Œäº†ã§ã™ï¼âœ¨`,linkCopied:"ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ãŸã‚ˆï¼ðŸ“‹",categories:{chinese:"ðŸš ä¸­è¯æ–™ç†",japanese:"ðŸ£ æ—¥æœ¬æ–™ç†",korean:"ðŸ‡°ðŸ‡· éŸ“å›½æ–™ç†",western:"ðŸ• æ´‹é£Ÿ",se_asian:"ðŸ² æ±å—äºž",indian_middle_east:"ðŸ•Œ ã‚¤ãƒ³ãƒ‰/ä¸­æ±æ–™ç†",noodles:"ðŸœ éººé¡ž",rice_bento:"ðŸ± ã”é£¯/å®šé£Ÿ/å¼å½“",sushi_sashimi:"ðŸ£ å¯¿å¸/åˆºèº«",burger_pizza:"ðŸ• ãƒãƒ¼ã‚¬ãƒ¼/ãƒ”ã‚¶",hotpot_bbq:"ðŸ”¥ ç«é‹/ç„¼è‚‰",dim_sum:"ðŸ¥Ÿ ç‚¹å¿ƒ",fine_dining_buffet:"ðŸ¥‚ é«˜ç´š/ãƒ“ãƒ¥ãƒƒãƒ•ã‚§",all_day_brunch:"ðŸ³ ãƒ–ãƒ©ãƒ³ãƒ",bar_izakaya:"ðŸ¹ ãƒãƒ¼/å±…é…’å±‹",spicy:"ðŸŒ¶ï¸ è¾›ã„æ–™ç†",dessert:"ðŸ§ ãƒ‡ã‚¶ãƒ¼ãƒˆ",fast_food:"ðŸ” ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰",healthy_vege:"ðŸ¥¦ ãƒ˜ãƒ«ã‚·ãƒ¼/ãƒ™ã‚¸"},unknownName:"ä¸æ˜Ž",noAddress:"ä½æ‰€ä¸æ˜Ž",ratingNew:"â­ æ–°è¦ã‚ªãƒ¼ãƒ—ãƒ³ï¼",noHoursInfo:"å–¶æ¥­æ™‚é–“æƒ…å ±ãªã—",priceFree:"ç„¡æ–™",walkMins:"ðŸš¶ å¾’æ­© ${mins} åˆ†",shareBtn:"ðŸ“¤ ã‚·ã‚§ã‚¢",shareText:"ã€Œãƒ¡ã‚·æ±ºã€ã§ã“ã‚Œã‚’é¸ã‚“ã ã‚ˆï¼š${name}ï¼ä¸€ç·’ã«ã©ã†ï¼ŸðŸ¥—",includeClosed:"å–¶æ¥­æ™‚é–“å¤–ã‚‚å«ã‚€ ðŸŒ™",excludeClosed:"å–¶æ¥­ä¸­ã®ã¿ â˜€ï¸",reviews:"å£ã‚³ãƒŸ",viewAllPhotos:"ã‚‚ã£ã¨è¦‹ã‚‹ ðŸ“¸",photosTitle:"å†™çœŸ",viewAllReviews:"ã‚‚ã£ã¨è¦‹ã‚‹ ðŸ’¬"}},z={chinese:{googleTypes:["chinese_restaurant","cantonese_restaurant","shanghainese_restaurant"],searchTypes:["chinese_restaurant"],zh_keywords:["ä¸­èœ","ä¸­å¼","ç²µèœ","ä¸Šæµ·","å·èœ","äº¬èœ","ç‡’å‘³","å¤§ç‰Œæª”","ç²¥","æ½®å·ž","å®¢å®¶","å°èœ","ä¸­èœé¤¨","ç§æˆ¿èœ","æ»¬èœ","æµ™èœ","é †å¾·èœ"],en_keywords:["chinese","cantonese","sichuan","shanghainese","chiu chow","congee","hakka","bistro","dapai","shunde"],jp_keywords:["ä¸­è¯æ–™ç†","ä¸­å›½æ–™ç†"],negativeKeywords:["é»žå¿ƒ"],isBroad:!0},japanese:{googleTypes:["japanese_restaurant"],searchTypes:["japanese_restaurant"],zh_keywords:["æ—¥æœ¬","å±…é…’å±‹","çƒå†¬","è•Žéº¥","ç‡’é³¥","ä¸¼","å¤©å©¦ç¾…","éµæ¿ç‡’","çˆç«¯ç‡’","å’Œç‰›","æ‡·çŸ³æ–™ç†"],en_keywords:["japanese","udon","soba","yakitori","tempura","donburi","izakaya","teppanyaki","wagyu","kaiseki","kappo"],jp_keywords:["æ—¥æœ¬æ–™ç†","å’Œé£Ÿ","ã†ã©ã‚“","ãã°","å¤©ã·ã‚‰","ä¸¼ç‰©","æ‡çŸ³","å‰²çƒ¹","ç„¼ãé³¥","ã¨ã‚“ã‹ã¤","é‰„æ¿ç„¼ã","å’Œç‰›"],isBroad:!0},sushi_sashimi:{googleTypes:["sushi_restaurant"],searchTypes:["sushi_restaurant","japanese_restaurant"],zh_keywords:["å£½å¸","åˆºèº«","é®¨","ä¸¼"],en_keywords:["sushi","sashimi","omakase","skewer"],jp_keywords:["å¯¿å¸","é®¨","åˆºèº«"],isBroad:!1},korean:{googleTypes:["korean_restaurant"],searchTypes:["korean_restaurant"],zh_keywords:["éŸ“åœ‹","éŸ“å¼","æ³¡èœ","é£¯å·","éŸ“ç‡’","ç‚¸é›ž","éƒ¨éšŠé‹","çŸ³é‹æ‹Œé£¯","ç‚¸é†¬éºµ"],en_keywords:["korean","kimchi","bbq","fried chicken","gimbap","bibimbap","jajangmyeon","k-food"],jp_keywords:["éŸ“å›½æ–™ç†","ãƒ“ãƒ“ãƒ³ãƒ","ã‚­ãƒ ãƒ","ç„¼è‚‰"],isBroad:!0},western:{googleTypes:["french_restaurant","american_restaurant","steak_house","mediterranean_restaurant","mexican_restaurant","spanish_restaurant","greek_restaurant","brazilian_restaurant","african_restaurant"],searchTypes:["french_restaurant","american_restaurant","steak_house"],zh_keywords:["è¥¿é¤","æ³•å¼","æ¼¢å ¡","ç‰›æ‰’","æ‰’æˆ¿","ç¾©å¤§åˆ©","åœ°ä¸­æµ·","å¢¨è¥¿å“¥","è¥¿ç­ç‰™"],en_keywords:["western","french","steak","mexican","spanish","mediterranean","bistro","gastropub","tapas"],jp_keywords:["æ´‹é£Ÿ","ãƒ•ãƒ¬ãƒ³ãƒ","ã‚¹ãƒ†ãƒ¼ã‚­","ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼"],isBroad:!0},burger_pizza:{googleTypes:["hamburger_restaurant","pizza_restaurant","sandwich_shop"],searchTypes:["hamburger_restaurant","pizza_restaurant"],zh_keywords:["æ¼¢å ¡","è–„é¤…","æŠ«è–©","ä¸‰æ–‡æ²»"],en_keywords:["burger","pizza","sandwich","burger joint"],jp_keywords:["ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼","ãƒ”ã‚¶"],isBroad:!1},se_asian:{googleTypes:["thai_restaurant","vietnamese_restaurant","indonesian_restaurant"],searchTypes:["thai_restaurant","vietnamese_restaurant","indonesian_restaurant"],zh_keywords:["æ³°åœ‹","è¶Šå—","æ˜Ÿé¦¬","å°å°¼","æ³°å¼","è¶Šå¼","æµ·å—é›ž","å†¬è”­åŠŸ","å–‡æ²™","è‚‰éª¨èŒ¶","æ²™çˆ¹","é¦¬ä¾†è¥¿äºž","æ–°åŠ å¡"],en_keywords:["thai","vietnamese","malaysian","singaporean","indonesian","pho","curry","laksa","satay","hainanese chicken"],jp_keywords:["ã‚¿ã‚¤æ–™ç†","ãƒ™ãƒˆãƒŠãƒ æ–™ç†"],isBroad:!0},noodles:{googleTypes:["ramen_restaurant"],searchTypes:["ramen_restaurant","chinese_restaurant","restaurant"],zh_keywords:["ç±³ç·š","æ‹‰éºµ","éºµ","ç²‰","æ²³","é›²åž","ç‰›è…©","æ°´é¤ƒ","è»Šä»”éºµ","å¢¨é­šä¸¸","éŽæ©‹","æ“”æ“”","è…©æ±"],en_keywords:["noodle","ramen","pho","udon","vermicelli","beef brisket","wonton","rice noodle","tan tan","crossing the bridge"],jp_keywords:["éºº","ãƒ©ãƒ¼ãƒ¡ãƒ³","ã†ã©ã‚“","ãã°"],negativeKeywords:["ç¾©å¤§åˆ©éºµ","æ„ç²‰","pasta"],isBroad:!1},rice_bento:{googleTypes:[],searchTypes:["chinese_restaurant","japanese_restaurant","restaurant"],zh_keywords:["é£¯","å®šé£Ÿ","ä¾¿ç•¶","ç›…é£¯","ç¢Ÿé ­é£¯","ç„—é£¯"],en_keywords:["rice","bento","set meal"],jp_keywords:["ã”é£¯","å®šé£Ÿ","å¼å½“"],isBroad:!1},spicy:{googleTypes:[],searchTypes:["chinese_restaurant","asian_restaurant","restaurant"],zh_keywords:["éº»è¾£","è¾£","æ°´ç…®","é…¸è¾£","æ¹˜èœ","å·èœ","é‡æ…¶","è¾£å‘³"],en_keywords:["spicy","mala","chili","hot","sichuan","hunanese","chungking"],jp_keywords:["å››å·æ–™ç†","è¾›ã„","æ¿€è¾›"],isBroad:!1},hotpot_bbq:{googleTypes:["barbecue_restaurant"],searchTypes:["barbecue_restaurant","chinese_restaurant","japanese_restaurant","korean_restaurant","restaurant"],zh_keywords:["ç«é‹","é›žç…²","ç‡’è‚‰","éŸ“ç‡’","ç‡’çƒ¤","ä¸²ç‡’","æ‰“é‚Šçˆ","å°å¼ç«é‹"],en_keywords:["bbq","hot pot","hotpot","barbecue","grill","shabu shabu","yakiniku","steamboat"],jp_keywords:["ç„¼è‚‰","ç«é‹","ã‚¹ãƒ†ãƒ¼ã‚­","ã—ã‚ƒã¶ã—ã‚ƒã¶","ã™ãç„¼ã"],isBroad:!1},dim_sum:{googleTypes:[],searchTypes:["chinese_restaurant","restaurant"],zh_keywords:["é»žå¿ƒ","é£²èŒ¶","è¦é¤ƒ","ç›…é£¯","å°ç± åŒ…","ç‡’è³£","é…’æ¨“","èŒ¶æ¨“"],en_keywords:["yum cha","dim sum","dumpling","xiao long bao","teahouse"],jp_keywords:["é£²èŒ¶","ç‚¹å¿ƒ"],isBroad:!1},fine_dining_buffet:{googleTypes:["fine_dining_restaurant","buffet_restaurant","seafood_restaurant"],searchTypes:["fine_dining_restaurant","buffet_restaurant","restaurant"],zh_keywords:["é«˜ç´š","è‡ªåŠ©é¤","æµ·é®®","è ”å§","ç²¾ç·»é¤é£²"],en_keywords:["fine dining","buffet","seafood","oyster bar","gastronomy"],jp_keywords:["é«˜ç´šæ–™ç†","ãƒ“ãƒ¥ãƒƒãƒ•ã‚§","ã‚·ãƒ¼ãƒ•ãƒ¼ãƒ‰"],isBroad:!1},all_day_brunch:{googleTypes:["breakfast_restaurant","brunch_restaurant","cafe","tea_house","coffee_shop","cat_cafe","dog_cafe"],searchTypes:["breakfast_restaurant","brunch_restaurant","cafe","coffee_shop"],zh_keywords:["brunch","breakfast","pancake","å…¨æ—¥æ—©é¤","æ—©åˆé¤","ç­æˆŸ","èˆ’èŠ™è•¾","é¬†é¤…","å’–å•¡","æ–‡é’"],en_keywords:["coffee","cafe","tea","all day breakfast","specialty coffee","roaster"],jp_keywords:["ã‚«ãƒ•ã‚§","æœé£Ÿ","ãƒ–ãƒ©ãƒ³ãƒ"],isBroad:!0},bar_izakaya:{googleTypes:["bar","pub","wine_bar","bar_and_grill"],searchTypes:["bar","pub"],zh_keywords:["é…’","å±…é…’å±‹","é…’å§","ä¸²ç‡’","å•¤é…’","å¨å£«å¿Œ","ç´é…’"],en_keywords:["bar","pub","wine","beer","cocktail","izakaya","craft beer","whisky","gin","lounge"],jp_keywords:["å±…é…’å±‹","ãƒãƒ¼","ãƒ“ãƒ¼ãƒ«","ãƒ¯ã‚¤ãƒ³"],isBroad:!0},dessert:{googleTypes:["bakery","ice_cream_shop","dessert_restaurant","dessert_shop","confectionery","chocolate_shop","donut_shop","juice_shop"],searchTypes:["bakery","ice_cream_shop","dessert_restaurant","dessert_shop"],zh_keywords:["ç³–æ°´","ç”œ","é›ªç³•","å†°","è›‹ç³•","é¤…","ç­æˆŸ","ç³–æ°´èˆ–","ç”œå“"],en_keywords:["dessert","sweet","ice cream","cake","bakery","pancake","waffle","yogurt","bingsu","shaved ice"],jp_keywords:["ãƒ‡ã‚¶ãƒ¼ãƒˆ","ã‚¹ã‚¤ãƒ¼ãƒ„","ã‚±ãƒ¼ã‚­","ã‚¢ã‚¤ã‚¹","ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­"],isBroad:!0},fast_food:{googleTypes:["fast_food_restaurant","hamburger_restaurant","deli","food_court","diner","meal_delivery","meal_takeaway"],searchTypes:["fast_food_restaurant","restaurant"],zh_keywords:["å¿«é¤","å°é£Ÿ","ç‚¸é›ž","ç†±ç‹—","å¤–è³£","ç¾Žé£Ÿå»£å ´"],en_keywords:["fast food","snack","fried chicken","hotdog","takeaway","takeout","food court"],jp_keywords:["ãƒ•ã‚¡ã‚¹ãƒˆãƒ•ãƒ¼ãƒ‰","ãƒ•ãƒ¼ãƒ‰ã‚³ãƒ¼ãƒˆ"],isBroad:!0},indian_middle_east:{googleTypes:["indian_restaurant","lebanese_restaurant","turkish_restaurant","middle_eastern_restaurant","afghani_restaurant"],searchTypes:["indian_restaurant","middle_eastern_restaurant"],zh_keywords:["å°åº¦","å’–å“©","ä¸­æ±","åœŸè€³å…¶","æ¸…çœŸ"],en_keywords:["kebab","curry","indian","middle eastern","turkish","hummus","tandoori","halal"],jp_keywords:["ã‚¤ãƒ³ãƒ‰æ–™ç†","ã‚«ãƒ¬ãƒ¼"],isBroad:!0},healthy_vege:{googleTypes:["vegan_restaurant","vegetarian_restaurant"],searchTypes:["vegan_restaurant","vegetarian_restaurant","restaurant"],zh_keywords:["ç´ é£Ÿ","å¥åº·","æ²™å¾‹","æœ‰æ©Ÿ","è”¬é£Ÿ","ç´”ç´ "],en_keywords:["vegan","vegetarian","salad","healthy","organic","green","plant-based"],jp_keywords:["ãƒ™ã‚¸ã‚¿ãƒªã‚¢ãƒ³","ã‚µãƒ©ãƒ€"],isBroad:!0}},He=["restaurant","point_of_interest","seafood_restaurant","buffet_restaurant","fine_dining_restaurant","food_court","diner","asian_restaurant","chinese_restaurant","japanese_restaurant","italian_restaurant","french_restaurant","thai_restaurant","vietnamese_restaurant","american_restaurant","korean_restaurant","mexican_restaurant"],je=["restaurant","diner"],oe=["asian_restaurant","chinese_restaurant","indian_restaurant","indonesian_restaurant","japanese_restaurant","korean_restaurant","ramen_restaurant","sushi_restaurant","thai_restaurant","vietnamese_restaurant","lebanese_restaurant","turkish_restaurant","middle_eastern_restaurant","afghani_restaurant","african_restaurant","american_restaurant","barbecue_restaurant","brazilian_restaurant","french_restaurant","greek_restaurant","italian_restaurant","mediterranean_restaurant","mexican_restaurant","pizza_restaurant","seafood_restaurant","spanish_restaurant","steak_house","buffet_restaurant","fine_dining_restaurant","restaurant","bar_and_grill","bar","vegan_restaurant","vegetarian_restaurant","cat_cafe","chinese_restaurant","chocolate_factory","chocolate_shop","coffee_shop","confectionery","deli","dessert_restaurant","dessert_shop","diner","dog_cafe","donut_shop","fast_food_restaurant","fine_dining_restaurant","food_court","french_restaurant","greek_restaurant","hamburger_restaurant","ice_cream_shop","indian_restaurant","indonesian_restaurant","italian_restaurant","japanese_restaurant","juice_shop","korean_restaurant","lebanese_restaurant","meal_delivery","meal_takeaway","mediterranean_restaurant","mexican_restaurant","middle_eastern_restaurant","pizza_restaurant","pub","ramen_restaurant","restaurant","sandwich_shop","seafood_restaurant","spanish_restaurant","steak_house","sushi_restaurant","tea_house","thai_restaurant","turkish_restaurant","vegan_restaurant","vegetarian_restaurant","vietnamese_restaurant","wine_bar"],Y=["id","displayName","location","rating","userRatingCount","regularOpeningHours","priceLevel","businessStatus","types","utcOffsetMinutes"],ce=["id","formattedAddress","regularOpeningHours","nationalPhoneNumber","photos","reviews","googleMapsURI","googleMapsLinks"],de={PRICE_LEVEL_FREE:{val:"0",label:e=>e.priceFree},PRICE_LEVEL_INEXPENSIVE:{val:"1",label:()=>"$"},PRICE_LEVEL_MODERATE:{val:"2",label:()=>"$$"},PRICE_LEVEL_EXPENSIVE:{val:"3",label:()=>"$$$"},PRICE_LEVEL_VERY_EXPENSIVE:{val:"4",label:()=>"$$$$"}},q={0:"PRICE_LEVEL_FREE",1:"PRICE_LEVEL_INEXPENSIVE",2:"PRICE_LEVEL_MODERATE",3:"PRICE_LEVEL_EXPENSIVE",4:"PRICE_LEVEL_VERY_EXPENSIVE"},x={DEFAULT_SEARCH_RADIUS_MULTIPLIER:80,DEFAULT_MINS:5,HAPTIC_FEEDBACK_DURATION:{SHORT:30},METERS_PER_DEGREE_LAT:111320,GOOGLE_MAPS_API_LIMIT:20,SEARCH_CANDIDATE_LIMIT:60},u=e=>document.getElementById(e);function We(e={}){return new Promise((t,a)=>{if(!navigator.geolocation){a(new Error("GEOLOCATION_NOT_SUPPORTED"));return}navigator.geolocation.getCurrentPosition(t,a,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...e})})}function ue(e,t){const a=z[t];if(!a)return!1;const s=(e.name||"").toLowerCase(),r=e.types||[];if(a.googleTypes&&a.googleTypes.length>0&&r.some(c=>a.googleTypes.includes(c)))return!0;if(r.length===0||r.some(c=>He.includes(c))||a.googleTypes.length===0){if(a.negativeKeywords&&a.negativeKeywords.some(d=>s.includes(d.toLowerCase())))return!1;const c=["zh_keywords","en_keywords","jp_keywords"];for(const d of c)if(a[d]&&a[d].some(f=>s.includes(f.toLowerCase())))return!0}return!1}function B(e){if(typeof navigator<"u"&&navigator.vibrate){if(!("ontouchstart"in window||navigator.maxTouchPoints>0))return;try{navigator.vibrate(e)}catch{}}}function G(e,t){return!e||!t?"#":`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(e)}&query_place_id=${t}`}function J(e,t){return{id:e.id||e.place_id,name:typeof e.displayName=="string"?e.displayName:e.displayName?.text||t.unknownName,rating:e.rating,userRatingCount:e.userRatingCount||0,vicinity:e.formattedAddress||e.vicinity||t.noAddress,types:e.types||[],priceLevel:e.priceLevel,phone:e.nationalPhoneNumber,businessStatus:e.businessStatus,location:e.location,openingHours:e.regularOpeningHours,isOpen:null,durationText:null,durationValue:null,photos:e.photos||[],reviews:e.reviews||[],googleMapsUri:e.googleMapsURI||e.googleMapsUri||e.googleMapsLinks?.placeURI||e.googleMapsLinks?.placeUri,reviewsUri:e.googleMapsLinks?.reviewsUri||e.googleMapsLinks?.reviewsURI,photosUri:e.googleMapsLinks?.photosUri||e.googleMapsLinks?.photosURI}}function Ve(e,t){e.lastPickedId=t.id,e.history||(e.history=[]),e.history.includes(t.id)||e.history.push(t.id)}function $e(e,t){const a=t*.6,s=a/x.METERS_PER_DEGREE_LAT,r=a/(x.METERS_PER_DEGREE_LAT*Math.cos(e.lat*Math.PI/180));return[{lat:e.lat,lng:e.lng},{lat:e.lat-s,lng:e.lng-r},{lat:e.lat+s,lng:e.lng-r},{lat:e.lat-s,lng:e.lng+r},{lat:e.lat+s,lng:e.lng+r}]}function Ge(e,t){const a=e.openingHours?.weekdayDescriptions;if(!a||a.length!==7)return t.noHoursInfo;const s=new Date,r=[s.toLocaleDateString("zh-HK",{weekday:"long"}),s.toLocaleDateString("en-US",{weekday:"long"}),s.toLocaleDateString("ja-JP",{weekday:"long"})],o=a.find(l=>r.some(c=>l.includes(c)))||a[(s.getDay()+6)%7];if(o){const l=o.split(/: |ï¼š/);return l[1]?l[1].trim():o}return t.noHoursInfo}function Ke(e,t){if(e==null)return"";let a=e;q[a]&&(a=q[a]);const s=de[a];return s?s.label(t):""}function qe(e,t){const a=t.categories;for(const s of Object.keys(z))if(ue(e,s))return a[s]||s;return null}function Xe(e){if(!e||!Array.isArray(e)||e.length===0)return null;if(e.length===1&&!e[0].close)return!0;const t=new Date,a=t.getDay()*1440+t.getHours()*60+t.getMinutes(),s=10080;for(const r of e){if(!r.open||!r.close)continue;const o=Number(r.open.day)*1440+Number(r.open.hour)*60+Number(r.open.minute);let l=Number(r.close.day)*1440+Number(r.close.hour)*60+Number(r.close.minute);if(l<=o&&(l+=s),a>=o&&a<l||a+s>=o&&a+s<l)return!0}return!1}const X={TTL:1440*60*1e3,get(e){try{const t=localStorage.getItem(`place_detail_${e}`);if(!t)return null;const{data:a,timestamp:s}=JSON.parse(t);return Date.now()-s>this.TTL?(localStorage.removeItem(`place_detail_${e}`),null):a}catch{return null}},set(e,t){try{localStorage.setItem(`place_detail_${e}`,JSON.stringify({data:t,timestamp:Date.now()}))}catch(a){console.warn("Storage Full:",a)}},clean(){const e=()=>{const t=Date.now();let a=0;try{for(let s=0;s<localStorage.length;s++){const r=localStorage.key(s);if(r&&r.startsWith("place_detail_"))try{const o=localStorage.getItem(r);if(o){const{timestamp:l}=JSON.parse(o);t-l>this.TTL&&(localStorage.removeItem(r),a++,s--)}}catch{localStorage.removeItem(r)}}}catch{}};"requestIdleCallback"in window?requestIdleCallback(e,{timeout:5e3}):setTimeout(e,2e3)}},ie={CACHE_NAME:"restaurant-photos-v1",async getCachedUrl(e){if(!e||typeof e!="string"||!e.startsWith("http"))return e;try{const t=await caches.open(this.CACHE_NAME),a=await t.match(e);if(a){const l=await a.blob();return URL.createObjectURL(l)}const s=await fetch(e,{mode:"cors",credentials:"omit"});if(!s.ok)throw new Error("Network response was not ok");const r=s.clone();await t.put(e,r);const o=await s.blob();return URL.createObjectURL(o)}catch(t){return console.warn("ImageCache failed, falling back to remote URL:",t),e}}};async function he(e){B(50),e.UI.showScreen("loading-screen"),e.Data.history=[];const t=e.translations[e.currentLang];try{let a;e.Data.manualLocation?a={coords:{latitude:e.Data.manualLocation.lat,longitude:e.Data.manualLocation.lng}}:a=await We();const{latitude:s,longitude:r}=a.coords;e.Data.userPos={lat:s,lng:r};const{Place:o}=await google.maps.importLibrary("places"),l=await fe(o,e.Data.userPos,e.Config.radius,e);if(!l||l.length===0){alert(t.noResults),e.UI.showScreen("main-flow");return}const c=await ge(l,e.Data.userPos,e);if(c.length===0){const f=e.Config.filterMode==="whitelist"?t.noFilteredResultsWhitelist:t.noFilteredResultsBlacklist;alert(f),e.UI.showScreen("main-flow");return}e.Data.candidates=c;const d=c[Math.floor(Math.random()*c.length)];e.Data.currentPlace=await me(o,d,e),e.UI.startSlotAnimation(e.Data.candidates,()=>ye(e))}catch(a){console.error("Search Error:",a),e.UI.handleError(a,e)}}async function fe(e,t,a,s){const r=$e(t,a),o=Ye(s),l=[],c=new Set,d=async(y,g)=>{const T={locationRestriction:{center:y,radius:a},includedPrimaryTypes:g,fields:Y,maxResultCount:x.GOOGLE_MAPS_API_LIMIT,rankPreference:"DISTANCE"};try{const{places:P}=await e.searchNearby(T);return P||[]}catch(P){return console.warn("Fetch error:",P),[]}},f=y=>{let g=0;return y.forEach(T=>{T&&T.id&&!c.has(T.id)&&(c.add(T.id),l.push(T),g++)}),g};for(const[y,g]of o.entries()){if(!g||g.length===0)continue;if(l.length>=x.SEARCH_CANDIDATE_LIMIT)break;const T=await d(r[0],g);f(T);const P=a<300,H=s.Config.filterMode==="whitelist"&&l.length<10,j=T.length>=x.GOOGLE_MAPS_API_LIMIT;if(y>0||P||!j&&!H)continue;const I=await Promise.all([d(r[1],g),d(r[4],g)]);let W=0;if(I.forEach(U=>{W+=f(U)}),W===0||l.length>=x.SEARCH_CANDIDATE_LIMIT)continue;(await Promise.all([d(r[2],g),d(r[3],g)])).forEach(U=>f(U))}return l}function Ye(e){const t=[],a=oe;if(e.Config.filterMode==="whitelist"&&e.Config.excluded.size>0){const s=new Set,r=new Set;e.Config.excluded.forEach(c=>{const d=z[c];d&&d.searchTypes&&d.searchTypes.forEach(f=>{oe.includes(f)&&(BROAD_PLACE_TYPES.includes(f)?r.add(f):s.add(f))})});const o=Array.from(s);for(let c=0;c<o.length;c+=50)t.push(o.slice(c,c+50));const l=Array.from(r);for(let c=0;c<l.length;c+=50)t.push(l.slice(c,c+50))}else if(e.Config.filterMode==="blacklist"&&e.Config.excluded.size>0){const s=new Set,r=new Set(je);Object.keys(z).forEach(c=>{const d=z[c];!d||!d.searchTypes||(e.Config.excluded.has(c)?d.searchTypes.forEach(f=>s.add(f)):d.searchTypes.forEach(f=>r.add(f)))});const o=new Set([...s].filter(c=>!r.has(c))),l=a.filter(c=>!o.has(c));for(let c=0;c<l.length;c+=50)t.push(l.slice(c,c+50))}if(t.length===0)for(let s=0;s<a.length;s+=50)t.push(a.slice(s,s+50));return t}async function ge(e,t,a){const s=a.translations[a.currentLang],r=await Je(e,a,s),o=await Ze(t,r,a);return Qe(o,a)}async function Je(e,t,a){return(await Promise.all(e.map(async r=>{const o=J(r,a);try{o.isOpen=await r.isOpen()}catch{o.isOpen=null}return o.isOpen===null&&(o.isOpen=o.openingHours?.periods?Xe(o.openingHours.periods):o.openingHours?.openNow),o}))).filter(r=>r.businessStatus!=="OPERATIONAL"&&r.businessStatus?!1:t.Config.includeClosed||r.isOpen!==!1)}async function Ze(e,t,a){const s=await pe(e,t);let r=s.filter(o=>!o.durationValue||o.durationValue/60<=a.Config.mins);return r.length===0&&(r=s.sort((o,l)=>(o.durationValue||9999)-(l.durationValue||9999)).slice(0,3)),r}function Qe(e,t){return e.filter(a=>{const s=Array.from(t.Config.excluded),r=s.some(o=>ue(a,o));if(t.Config.filterMode==="whitelist"){if(s.length>0&&!r)return!1}else if(r)return!1;if(a.priceLevel!==void 0&&a.priceLevel!==null){const o=q[a.priceLevel]||a.priceLevel,l=de[o];if(l&&t.Config.prices.size>0&&!t.Config.prices.has(l.val))return!1}return!0})}async function me(e,t,a){if(!t||!t.id)return t;const s=o=>o&&o.map(l=>({...l,getURI:c=>l.cachedURI||""})),r=X.get(t.id);if(r){r.photos&&(r.photos=s(r.photos));const{durationText:o,durationValue:l}=t,c={...t,...r};return o&&(c.durationText=o),l&&(c.durationValue=l),c}try{const o=new e({id:t.id});await o.fetchFields({fields:[...Y,...ce]});const l=a.translations[a.currentLang],c=J(o,l);o.photos&&o.photos.length>0&&(c.photos=o.photos.map(y=>({cachedURI:y.getURI({maxHeight:1e3}),widthPx:y.widthPx,heightPx:y.heightPx,authorAttributions:y.authorAttributions})));const{durationText:d,durationValue:f}=t;Object.assign(t,c),d&&(t.durationText=d),f&&(t.durationValue=f),X.set(t.id,c),t.photos&&(t.photos=s(t.photos))}catch(o){console.error("Error fetching place details:",o)}return t}async function pe(e,t){if(t.length===0)return[];const a=25,s=[];for(let l=0;l<t.length;l+=a)s.push(t.slice(l,l+a));const r=new google.maps.DistanceMatrixService;return(await Promise.all(s.map(l=>new Promise(c=>{r.getDistanceMatrix({origins:[e],destinations:l.map(d=>d.location),travelMode:google.maps.TravelMode.WALKING,unitSystem:google.maps.UnitSystem.METRIC},(d,f)=>{if(f!=="OK"){c(l.map(g=>({...g,durationText:null,durationValue:null})));return}const y=d.rows[0].elements;c(l.map((g,T)=>({...g,durationText:y[T].status==="OK"?y[T].duration.text:null,durationValue:y[T].status==="OK"?y[T].duration.value:null})))})})))).flat()}async function ye(e){if(B([50,30,50]),e.Data.candidates.length===0)return he(e);let t=e.Data.candidates;if(t.length>1){const o=new Set(e.Data.history||[]),l=t.filter(c=>!o.has(c.id));if(l.length>0)t=l;else if(e.Data.lastPickedId){const c=t.filter(d=>d.id!==e.Data.lastPickedId);c.length>0&&(t=c)}}let a=t[Math.floor(Math.random()*t.length)];const{Place:s}=await google.maps.importLibrary("places"),r=await me(s,a,e);e.UI.showResult(r,e.translations[e.currentLang],e.Config,e.Data)}async function et(e){const t=e.Data.params.get("resId");if(t){window.history.replaceState({},document.title,window.location.pathname),e.UI.showScreen("loading-screen");try{const{Place:a}=await google.maps.importLibrary("places"),s=new a({id:t});await s.fetchFields({fields:[...Y,...ce]});const r=parseFloat(e.Data.params.get("lat")),o=parseFloat(e.Data.params.get("lng"));!isNaN(r)&&!isNaN(o)&&(e.Data.userPos={lat:r,lng:o});const l=e.translations[e.currentLang],c=J(s,l);if(e.Data.userPos&&c.location){const[d]=await pe(e.Data.userPos,[c]);c.durationValue=d.durationValue,c.durationText=d.durationText}if(e.Data.userPos){const d=await fe(a,e.Data.userPos,e.Config.radius,e);d&&d.length>0&&(e.Data.candidates=await ge(d,e.Data.userPos,e))}e.UI.showResult(c,e.translations[e.currentLang],e.Config,e.Data,{fromShare:!0})}catch(a){console.error("Session restoration failed:",a),e.UI.handleError(a,e)}}}var Z={};(function e(t,a,s,r){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=(function(){if(!t.OffscreenCanvas)return!1;try{var i=new OffscreenCanvas(1,1),n=i.getContext("2d");n.fillRect(0,0,1,1);var h=i.transferToImageBitmap();n.createPattern(h,"no-repeat")}catch{return!1}return!0})();function d(){}function f(i){var n=a.exports.Promise,h=n!==void 0?n:t.Promise;return typeof h=="function"?new h(i):(i(d,d),null)}var y=(function(i,n){return{transform:function(h){if(i)return h;if(n.has(h))return n.get(h);var p=new OffscreenCanvas(h.width,h.height),_=p.getContext("2d");return _.drawImage(h,0,0),n.set(h,p),p},clear:function(){n.clear()}}})(c,new Map),g=(function(){var i=Math.floor(16.666666666666668),n,h,p={},_=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(w){var v=Math.random();return p[v]=requestAnimationFrame(function m(b){_===b||_+i-1<b?(_=b,delete p[v],w()):p[v]=requestAnimationFrame(m)}),v},h=function(w){p[w]&&cancelAnimationFrame(p[w])}):(n=function(w){return setTimeout(w,i)},h=function(w){return clearTimeout(w)}),{frame:n,cancel:h}})(),T=(function(){var i,n,h={};function p(_){function w(v,m){_.postMessage({options:v||{},callback:m})}_.init=function(m){var b=m.transferControlToOffscreen();_.postMessage({canvas:b},[b])},_.fire=function(m,b,E){if(n)return w(m,null),n;var L=Math.random().toString(36).slice(2);return n=f(function(k){function M(S){S.data.callback===L&&(delete h[L],_.removeEventListener("message",M),n=null,y.clear(),E(),k())}_.addEventListener("message",M),w(m,L),h[L]=M.bind(null,{data:{callback:L}})}),n},_.reset=function(){_.postMessage({reset:!0});for(var m in h)h[m](),delete h[m]}}return function(){if(i)return i;if(!s&&o){var _=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{i=new Worker(URL.createObjectURL(new Blob([_])))}catch(w){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",w),null}p(i)}return i}})(),P={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function H(i,n){return n?n(i):i}function j(i){return i!=null}function I(i,n,h){return H(i&&j(i[n])?i[n]:P[n],h)}function W(i){return i<0?0:Math.floor(i)}function Q(i,n){return Math.floor(Math.random()*(n-i))+i}function U(i){return parseInt(i,16)}function we(i){return i.map(ve)}function ve(i){var n=String(i).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:U(n.substring(0,2)),g:U(n.substring(2,4)),b:U(n.substring(4,6))}}function be(i){var n=I(i,"origin",Object);return n.x=I(n,"x",Number),n.y=I(n,"y",Number),n}function Ce(i){i.width=document.documentElement.clientWidth,i.height=document.documentElement.clientHeight}function Ee(i){var n=i.getBoundingClientRect();i.width=n.width,i.height=n.height}function ke(i){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=i,n}function Te(i,n,h,p,_,w,v,m,b){i.save(),i.translate(n,h),i.rotate(w),i.scale(p,_),i.arc(0,0,1,v,m,b),i.restore()}function Ie(i){var n=i.angle*(Math.PI/180),h=i.spread*(Math.PI/180);return{x:i.x,y:i.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:i.startVelocity*.5+Math.random()*i.startVelocity,angle2D:-n+(.5*h-Math.random()*h),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:i.color,shape:i.shape,tick:0,totalTicks:i.ticks,decay:i.decay,drift:i.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:i.gravity*3,ovalScalar:.6,scalar:i.scalar,flat:i.flat}}function Le(i,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var h=n.tick++/n.totalTicks,p=n.x+n.random*n.tiltCos,_=n.y+n.random*n.tiltSin,w=n.wobbleX+n.random*n.tiltCos,v=n.wobbleY+n.random*n.tiltSin;if(i.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-h)+")",i.beginPath(),l&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))i.fill(Se(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(w-p)*.1,Math.abs(v-_)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var m=Math.PI/10*n.wobble,b=Math.abs(w-p)*.1,E=Math.abs(v-_)*.1,L=n.shape.bitmap.width*n.scalar,k=n.shape.bitmap.height*n.scalar,M=new DOMMatrix([Math.cos(m)*b,Math.sin(m)*b,-Math.sin(m)*E,Math.cos(m)*E,n.x,n.y]);M.multiplySelf(new DOMMatrix(n.shape.matrix));var S=i.createPattern(y.transform(n.shape.bitmap),"no-repeat");S.setTransform(M),i.globalAlpha=1-h,i.fillStyle=S,i.fillRect(n.x-L/2,n.y-k/2,L,k),i.globalAlpha=1}else if(n.shape==="circle")i.ellipse?i.ellipse(n.x,n.y,Math.abs(w-p)*n.ovalScalar,Math.abs(v-_)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):Te(i,n.x,n.y,Math.abs(w-p)*n.ovalScalar,Math.abs(v-_)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var C=Math.PI/2*3,R=4*n.scalar,D=8*n.scalar,N=n.x,A=n.y,F=5,O=Math.PI/F;F--;)N=n.x+Math.cos(C)*D,A=n.y+Math.sin(C)*D,i.lineTo(N,A),C+=O,N=n.x+Math.cos(C)*R,A=n.y+Math.sin(C)*R,i.lineTo(N,A),C+=O;else i.moveTo(Math.floor(n.x),Math.floor(n.y)),i.lineTo(Math.floor(n.wobbleX),Math.floor(_)),i.lineTo(Math.floor(w),Math.floor(v)),i.lineTo(Math.floor(p),Math.floor(n.wobbleY));return i.closePath(),i.fill(),n.tick<n.totalTicks}function Me(i,n,h,p,_){var w=n.slice(),v=i.getContext("2d"),m,b,E=f(function(L){function k(){m=b=null,v.clearRect(0,0,p.width,p.height),y.clear(),_(),L()}function M(){s&&!(p.width===r.width&&p.height===r.height)&&(p.width=i.width=r.width,p.height=i.height=r.height),!p.width&&!p.height&&(h(i),p.width=i.width,p.height=i.height),v.clearRect(0,0,p.width,p.height),w=w.filter(function(S){return Le(v,S)}),w.length?m=g.frame(M):k()}m=g.frame(M),b=k});return{addFettis:function(L){return w=w.concat(L),E},canvas:i,promise:E,reset:function(){m&&g.cancel(m),b&&b()}}}function ee(i,n){var h=!i,p=!!I(n||{},"resize"),_=!1,w=I(n,"disableForReducedMotion",Boolean),v=o&&!!I(n||{},"useWorker"),m=v?T():null,b=h?Ce:Ee,E=i&&m?!!i.__confetti_initialized:!1,L=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,k;function M(C,R,D){for(var N=I(C,"particleCount",W),A=I(C,"angle",Number),F=I(C,"spread",Number),O=I(C,"startVelocity",Number),xe=I(C,"decay",Number),De=I(C,"gravity",Number),Ne=I(C,"drift",Number),ae=I(C,"colors",we),Oe=I(C,"ticks",Number),ne=I(C,"shapes"),Ae=I(C,"scalar"),Be=!!I(C,"flat"),re=be(C),se=N,$=[],Ue=i.width*re.x,Fe=i.height*re.y;se--;)$.push(Ie({x:Ue,y:Fe,angle:A,spread:F,startVelocity:O,color:ae[se%ae.length],shape:ne[Q(0,ne.length)],ticks:Oe,decay:xe,gravity:De,drift:Ne,scalar:Ae,flat:Be}));return k?k.addFettis($):(k=Me(i,$,b,R,D),k.promise)}function S(C){var R=w||I(C,"disableForReducedMotion",Boolean),D=I(C,"zIndex",Number);if(R&&L)return f(function(O){O()});h&&k?i=k.canvas:h&&!i&&(i=ke(D),document.body.appendChild(i)),p&&!E&&b(i);var N={width:i.width,height:i.height};m&&!E&&m.init(i),E=!0,m&&(i.__confetti_initialized=!0);function A(){if(m){var O={getBoundingClientRect:function(){if(!h)return i.getBoundingClientRect()}};b(O),m.postMessage({resize:{width:O.width,height:O.height}});return}N.width=N.height=null}function F(){k=null,p&&(_=!1,t.removeEventListener("resize",A)),h&&i&&(document.body.contains(i)&&document.body.removeChild(i),i=null,E=!1)}return p&&!_&&(_=!0,t.addEventListener("resize",A,!1)),m?m.fire(C,N,F):M(C,N,F)}return S.reset=function(){m&&m.reset(),k&&k.reset()},S}var V;function te(){return V||(V=ee(null,{useWorker:!0,resize:!0})),V}function Se(i,n,h,p,_,w,v){var m=new Path2D(i),b=new Path2D;b.addPath(m,new DOMMatrix(n));var E=new Path2D;return E.addPath(b,new DOMMatrix([Math.cos(v)*_,Math.sin(v)*_,-Math.sin(v)*w,Math.cos(v)*w,h,p])),E}function Pe(i){if(!l)throw new Error("path confetti are not supported in this browser");var n,h;typeof i=="string"?n=i:(n=i.path,h=i.matrix);var p=new Path2D(n),_=document.createElement("canvas"),w=_.getContext("2d");if(!h){for(var v=1e3,m=v,b=v,E=0,L=0,k,M,S=0;S<v;S+=2)for(var C=0;C<v;C+=2)w.isPointInPath(p,S,C,"nonzero")&&(m=Math.min(m,S),b=Math.min(b,C),E=Math.max(E,S),L=Math.max(L,C));k=E-m,M=L-b;var R=10,D=Math.min(R/k,R/M);h=[D,0,0,D,-Math.round(k/2+m)*D,-Math.round(M/2+b)*D]}return{type:"path",path:n,matrix:h}}function Re(i){var n,h=1,p="#000000",_='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof i=="string"?n=i:(n=i.text,h="scalar"in i?i.scalar:h,_="fontFamily"in i?i.fontFamily:_,p="color"in i?i.color:p);var w=10*h,v=""+w+"px "+_,m=new OffscreenCanvas(w,w),b=m.getContext("2d");b.font=v;var E=b.measureText(n),L=Math.ceil(E.actualBoundingBoxRight+E.actualBoundingBoxLeft),k=Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent),M=2,S=E.actualBoundingBoxLeft+M,C=E.actualBoundingBoxAscent+M;L+=M+M,k+=M+M,m=new OffscreenCanvas(L,k),b=m.getContext("2d"),b.font=v,b.fillStyle=p,b.fillText(n,S,C);var R=1/h;return{type:"bitmap",bitmap:m.transferToImageBitmap(),matrix:[R,0,0,R,-L*R/2,-k*R/2]}}a.exports=function(){return te().apply(this,arguments)},a.exports.reset=function(){te().reset()},a.exports.create=ee,a.exports.shapeFromPath=Pe,a.exports.shapeFromText=Re})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),Z,!1);const K=Z.exports;Z.exports.create;const tt={GALLERY_CONFIG:{TRACK_CENTER_PERCENT:-33.333333,SWIPE_THRESHOLD_PERCENT:.2,TRANSITION_DURATION_MS:350,MAX_HEIGHT:1200},showScreen(e){["main-flow","result-screen","loading-screen"].forEach(o=>{const l=u(o);l&&l.classList.toggle("hidden",o!==e)});const a=u("footer-home"),s=u("footer-result"),r=u("app-footer");e==="main-flow"?(r&&r.classList.remove("hidden"),a&&a.classList.remove("hidden"),s&&s.classList.add("hidden")):e==="result-screen"&&(r&&r.classList.remove("hidden"),a&&a.classList.add("hidden"),s&&s.classList.remove("hidden"))},handleError(e,t){const a=t.translations[t.currentLang];e.message==="GEOLOCATION_NOT_SUPPORTED"?alert(a.noGeo):e.code===1?alert(a.geoError):alert("Error: "+e.message),this.showScreen("main-flow")},updateStrings(e,t,a){const s={"location-title":e.locationTitle,"app-title":e.title,"app-subtitle":e.subtitle,"price-title":e.priceTitle,"filter-title":t.filterMode==="whitelist"?e.filterModeWhitelist:e.filterModeBlacklist,"find-btn":e.findBtn,"retry-btn":e.retry,"back-btn":e.backBtn,"loading-text":e.loading,"open-maps-btn":e.openMaps,"share-btn":e.shareBtn,"install-btn":e.installBtn,"reviews-title":e.reviews,"view-all-reviews":e.viewAllReviews,"photos-title":e.photosTitle,"view-all-photos":e.viewAllPhotos};Object.entries(s).forEach(([f,y])=>{const g=u(f);g&&(g.textContent=y)});const r=u("location-input");r&&(r.placeholder=e.searchPlaceholder);const o=u("location-display");o&&!a.manualLocation&&(o.textContent=e.useCurrentLocation);const l=u("distance-title");if(l){l.textContent="",l.appendChild(document.createTextNode(`${e.distanceTitle} (`));const f=document.createElement("span");f.id="distance-val",f.textContent=t.mins,l.appendChild(f),l.appendChild(document.createTextNode(" mins)"))}const c=u("include-closed-btn");if(c){const f=t.includeClosed;c.classList.toggle("active",f);const y=u("include-closed-label");y&&(y.textContent=f?e.includeClosed:e.excludeClosed)}const d=u("filter-mode-label");d&&(d.textContent=t.filterMode==="whitelist"?e.filterToggleBlacklist:e.filterToggleWhitelist),document.querySelectorAll(".lang-selector span").forEach(f=>{f.classList.toggle("active",f.dataset.lang===a.currentLang)})},initFilters(e,t,a){const s=u("filter-list");if(!s)return;s.innerHTML="";const r=e.categories;Object.keys(z).forEach(o=>{const l=document.createElement("div");l.className=`filter-item ${t.excluded.has(o)?"active":""}`,l.textContent=r[o]||o,l.onclick=()=>{t.excluded.has(o)?(t.excluded.delete(o),l.classList.remove("active")):(t.excluded.add(o),l.classList.add("active")),typeof a=="function"&&a(),B(x.HAPTIC_FEEDBACK_DURATION.SHORT)},s.appendChild(l)}),document.querySelectorAll(".price-item").forEach(o=>{const l=o.dataset.price;o.classList.toggle("active",t.prices.has(l)),o.onclick=()=>{t.prices.has(l)?(t.prices.delete(l),o.classList.remove("active")):(t.prices.add(l),o.classList.add("active")),typeof a=="function"&&a(),B(x.HAPTIC_FEEDBACK_DURATION.SHORT)}})},async showResult(e,t,a,s,r={}){const{fromShare:o=!1}=r;this.showScreen("result-screen"),s.currentPlace=e,Ve(s,e);const l=this.getElements();if(this.renderHeader(l,e,o),this.renderPhotos(l,e),this.renderReviews(l,e),this.renderDetails(l,e,t),this.renderMap(l.mapCont,e,s.userPos),!o){this.triggerConfetti();const c=u("result-screen");c&&c.scrollIntoView({behavior:"smooth",block:"start"})}},getElements(){return{name:u("res-name"),rating:u("res-rating"),ratingCont:u("res-rating-container"),price:u("res-price"),priceCont:u("res-price-container"),cat:u("res-category"),catIcon:u("res-category-icon"),catCont:u("res-category-container"),hours:u("res-hours"),hoursCont:u("res-hours-container"),address:u("res-address"),mapCont:u("res-map-container"),phone:u("res-phone"),distance:u("res-distance"),distanceCont:u("res-distance-container"),mapsBtn:u("open-maps-btn"),photoCont:u("res-photo-container"),photoSection:u("res-photo-section"),photosViewAll:u("view-all-photos"),reviewsViewAll:u("view-all-reviews"),reviewsCont:u("res-reviews-container"),reviewsList:u("reviews-list")}},renderHeader(e,t,a){e.name&&(e.name.textContent=t.name),e.address&&(e.address.textContent=t.vicinity)},renderPhotos(e,t){if(e.photoSection){if(e.photosViewAll){let a=t.photosUri||t.googleMapsUri||G(t.name,t.id);a&&typeof a=="string"&&a.includes("maps/place//data")&&(a=a.replace("maps/place//data",`maps/place/${encodeURIComponent(t.name)}/data`)),e.photosViewAll.href=a}if(t.photos&&t.photos.length>0){if(e.photoSection.classList.remove("hidden"),e.photoCont){e.photoCont.innerHTML="";const a=document.createDocumentFragment();t.photos.forEach(s=>{const r=this.createPhotoItem(s,t.name);a.appendChild(r)}),e.photoCont.appendChild(a)}}else e.photoSection.classList.add("hidden")}},createPhotoItem(e,t){const a=document.createElement("img"),s=e.getURI({maxHeight:400});return a.className="photo-item",a.loading="lazy",a.alt=t,ie.getCachedUrl(s).then(r=>{a.src=r}),a.style.opacity="0",a.style.transition="opacity 0.3s ease",a.onload=()=>{a.style.opacity="1"},a.onclick=r=>{r.preventDefault(),r.stopPropagation();const o=Array.from(a.parentElement.children).indexOf(a);this.openPhotoModal(o)},a.onerror=function(){this.getAttribute("data-retried")?this.style.display="none":(this.setAttribute("data-retried","true"),setTimeout(()=>{const r=this.src.includes("?")?"&":"?";this.src=this.src+r+"retry="+Date.now()},1e3))},a},renderReviews(e,t){if(!(!e.reviewsCont||!e.reviewsList)){if(e.reviewsViewAll){let a=t.reviewsUri||t.googleMapsUri||G(t.name,t.id);a&&typeof a=="string"&&a.includes("maps/place//data")&&(a=a.replace("maps/place//data",`maps/place/${encodeURIComponent(t.name)}/data`)),e.reviewsViewAll.href=a}if(t.reviews&&t.reviews.length>0){e.reviewsCont.classList.remove("hidden"),e.reviewsList.innerHTML="",e.reviewsList.scrollLeft=0;const a=t.reviews.filter(s=>s.text&&(s.text.text||s.text).length>0).sort((s,r)=>{const o=s.publishTime?new Date(s.publishTime).getTime():0;return(r.publishTime?new Date(r.publishTime).getTime():0)-o});if(a.length===0)e.reviewsCont.classList.add("hidden");else{const s=document.createDocumentFragment();a.forEach(r=>{const o=this.createReviewItem(r);s.appendChild(o)}),e.reviewsList.appendChild(s)}}else e.reviewsCont.classList.add("hidden")}},createReviewItem(e){const t=document.createElement("div");t.className="review-item";const a="â­".repeat(Math.round(e.rating||0)),s=e.relativePublishTimeDescription||"",r=document.createElement("div");r.className="review-top";const o=document.createElement("span");o.className="review-author",o.textContent=e.authorAttribution?.displayName||"Anonymous";const l=document.createElement("span");l.className="review-time",l.textContent=s,r.appendChild(o),r.appendChild(l);const c=document.createElement("div");c.className="review-stars",c.textContent=a;const d=document.createElement("p");return d.className="review-text",d.textContent=e.text?.text||e.text||"",t.appendChild(r),t.appendChild(c),t.appendChild(d),t},renderDetails(e,t,a){const s=typeof t.rating=="number"&&t.rating>0;e.rating&&(e.rating.textContent=s?t.rating:a.ratingNew.replace(/â­\s*/,""));const r=Ke(t.priceLevel,a);e.price&&(e.price.textContent=r),e.priceCont&&(e.priceCont.style.display=r?"flex":"none");const o=qe(t,a);if(o){const c=o.match(new RegExp("^(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)\\s*(.*)$","u"));e.catIcon&&(e.catIcon.textContent=c?c[1]:"ðŸ´"),e.cat&&(e.cat.textContent=c?c[2]:o),e.catCont&&(e.catCont.style.display="flex")}else e.catCont&&(e.catCont.style.display="none");const l=Ge(t,a);e.hours&&(e.hours.textContent=l),e.hoursCont&&(e.hoursCont.style.display="flex"),t.durationText?(e.distance&&(e.distance.textContent=t.durationText),e.distanceCont&&(e.distanceCont.style.display="flex")):e.distanceCont&&(e.distanceCont.style.display="none"),t.phone?e.phone&&(e.phone.textContent=`ðŸ“ž ${t.phone}`,e.phone.href=`tel:${t.phone.replace(/\s+/g,"")}`,e.phone.style.display=""):e.phone&&(e.phone.style.display="none"),e.mapsBtn&&(e.mapsBtn.href=t.googleMapsUri||G(t.name,t.id))},async renderMap(e,t,a){if(e){if(!t.location){e.style.display="none";return}e.classList.add("skeleton"),e.style.display="block";try{const[{Map:s},{AdvancedMarkerElement:r}]=await Promise.all([google.maps.importLibrary("maps"),google.maps.importLibrary("marker")]),o=new s(e,{center:t.location,zoom:16,mapId:"DEMO_MAP_ID",disableDefaultUI:!1,mapTypeControl:!1,streetViewControl:!1,gestureHandling:"greedy",colorScheme:"FOLLOW_SYSTEM"});new r({map:o,position:t.location,title:t.name}),a&&this.renderUserLocationOnMap(o,a,t.location,r);const l=this.createMapCenterControl(o,t.location,a);o.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(l),google.maps.event.addListenerOnce(o,"idle",()=>e.classList.remove("skeleton"))}catch(s){console.error("Map Render Error:",s),e.style.display="none"}}},renderUserLocationOnMap(e,t,a,s){const r=document.createElement("div");r.style.width="16px",r.style.height="16px",r.style.backgroundColor="#4285F4",r.style.border="2px solid white",r.style.borderRadius="50%",r.style.boxShadow="0 0 4px rgba(0,0,0,0.3)",new s({map:e,position:t,title:"Your Location",content:r});const o=new google.maps.LatLngBounds;o.extend(a),o.extend(t),e.fitBounds(o,50)},createMapCenterControl(e,t,a){const s=document.createElement("button");return s.className="map-center-btn",s.innerHTML='<svg viewBox="0 0 24 24" width="22" height="22" fill="#666"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',s.title="Re-center Map",s.onclick=()=>{if(a){const r=new google.maps.LatLngBounds;r.extend(t),r.extend(a),e.fitBounds(r,50)}else e.setCenter(t),e.setZoom(16)},s},startSlotAnimation(e,t){const a=u("slot-name");if(!a)return;let s=0;const r=setInterval(()=>{const o=e[Math.floor(Math.random()*e.length)];a.textContent=o?.name||"...",++s>15&&(clearInterval(r),typeof t=="function"&&t())},100)},triggerConfetti(){(K.create?K.create():K)({particleCount:150,spread:70,origin:{y:.6},colors:["#ff6b81","#ffd32a","#2ecc71","#3498db"]})},async shareCurrentPlace(e,t,a){if(!e)return;const s=`${window.location.origin}${window.location.pathname}?resId=${e.id}${a?`&lat=${a.lat}&lng=${a.lng}`:""}`,r=t.shareText.replace("${name}",e.name);if(navigator.share)try{await navigator.share({title:e.name,text:r,url:s})}catch(o){console.error("Share failed:",o)}else try{await navigator.clipboard.writeText(`${r}
${s}`),alert(t.linkCopied)}catch{alert(s)}},openPhotoModal(e){const t=this.App||window.App;if(!t?.Data?.currentPlace?.photos)return;this.currentPhotoIndex=e;const a=u("photo-modal"),s=t.Data.currentPlace.photos;this.updateModalImages(s),a.classList.remove("hidden"),document.body.style.overflow="hidden";const r=s.length>1;u("modal-prev").style.display=r?"block":"none",u("modal-next").style.display=r?"block":"none"},updateModalImages(e){const{MAX_HEIGHT:t}=this.GALLERY_CONFIG,a=(this.currentPhotoIndex-1+e.length)%e.length,s=(this.currentPhotoIndex+1)%e.length,r=(o,l)=>{if(!o)return;const c=e[l].getURI({maxHeight:t});ie.getCachedUrl(c).then(d=>{o.src=d})};r(u("photo-prev"),a),r(u("photo-curr"),this.currentPhotoIndex),r(u("photo-next"),s)},closePhotoModal(){const e=u("photo-modal");e&&e.classList.add("hidden"),document.body.style.overflow=""},navigatePhoto(e){const t=this.App?.Data?.currentPlace?.photos;!t||t.length<=1||(this.currentPhotoIndex=(this.currentPhotoIndex+e+t.length)%t.length,this.updateModalImages(t))},initPhotoModal(e){this.App=e;const t=document.querySelector(".modal-overlay"),a={prev:u("modal-prev"),next:u("modal-next"),close:u("modal-close"),track:u("image-track")};t&&(t.onclick=()=>this.closePhotoModal()),a.close&&(a.close.onclick=()=>this.closePhotoModal()),a.prev&&(a.prev.onclick=s=>{s.stopPropagation(),this.navigatePhoto(-1)}),a.next&&(a.next.onclick=s=>{s.stopPropagation(),this.navigatePhoto(1)}),a.track&&(a.track.querySelectorAll(".track-img").forEach(s=>{s.onclick=()=>this.closePhotoModal(),s.style.cursor="zoom-out"}),this._bindGalleryGestures(a.track)),window.addEventListener("keydown",s=>{const r=u("photo-modal");if(r&&!r.classList.contains("hidden")){const o={Escape:()=>this.closePhotoModal(),ArrowLeft:()=>this.navigatePhoto(-1),ArrowRight:()=>this.navigatePhoto(1)};o[s.key]&&o[s.key]()}})},_bindGalleryGestures(e){const{TRACK_CENTER_PERCENT:t,SWIPE_THRESHOLD_PERCENT:a,TRANSITION_DURATION_MS:s}=this.GALLERY_CONFIG;let r=0,o=!1;e.addEventListener("touchstart",l=>{r=l.changedTouches[0].screenX,o=!0,e.classList.remove("track-transition")},{passive:!0}),e.addEventListener("touchmove",l=>{if(!o)return;const c=l.changedTouches[0].screenX-r,d=e.parentElement.offsetWidth,f=c/(d*3)*100;e.style.transform=`translateX(${t+f}%)`},{passive:!0}),e.addEventListener("touchend",l=>{if(!o)return;o=!1;const c=l.changedTouches[0].screenX-r,d=e.parentElement.offsetWidth*a;if(e.classList.add("track-transition"),Math.abs(c)>d){const f=c>0?-1:1,y=f===1?t*2:0;e.style.transform=`translateX(${y}%)`,setTimeout(()=>{this.navigatePhoto(f),e.classList.remove("track-transition"),e.style.transform=`translateX(${t}%)`},s)}else e.style.transform=`translateX(${t}%)`},{passive:!0})}},at="modulepreload",nt=function(e){return"/"+e},le={},rt=function(t,a,s){let r=Promise.resolve();if(a&&a.length>0){let f=function(y){return Promise.all(y.map(g=>Promise.resolve(g).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var l=f;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");r=f(a.map(y=>{if(y=nt(y),y in le)return;le[y]=!0;const g=y.endsWith(".css"),T=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${T}`))return;const P=document.createElement("link");if(P.rel=g?"stylesheet":at,g||(P.as="script"),P.crossOrigin="",P.href=y,d&&P.setAttribute("nonce",d),document.head.appendChild(P),g)return new Promise((H,j)=>{P.addEventListener("load",H),P.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${y}`)))})}))}function o(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return r.then(c=>{for(const d of c||[])d.status==="rejected"&&o(d.reason);return t().catch(o)})};function st(e={}){const{immediate:t=!1,onNeedRefresh:a,onOfflineReady:s,onRegistered:r,onRegisteredSW:o,onRegisterError:l}=e;let c,d;const f=async(g=!0)=>{await d};async function y(){if("serviceWorker"in navigator){if(c=await rt(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/sw.js",{scope:"/",type:"classic"})).catch(g=>{l?.(g)}),!c)return;c.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),c.addEventListener("installed",g=>{g.isUpdate||s?.()}),c.register({immediate:t}).then(g=>{o?o("/sw.js",g):r?.(g)}).catch(g=>{l?.(g)})}}return d=y(),f}const ot={deferredPrompt:null,translations:null,currentLang:null,init(e,t){this.translations=e,this.currentLang=t,"serviceWorker"in navigator&&st({immediate:!0,onNeedRefresh(){console.log("New content available, will update on next launch.")},onOfflineReady(){console.log("App ready to work offline")}}),window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),this.deferredPrompt=s,u("install-container")&&!this.isIOS()&&u("install-container").classList.remove("hidden")}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,u("install-container")&&u("install-container").classList.add("hidden")});const a=u("install-btn");a&&(a.addEventListener("click",()=>this.handleInstall()),this.isIOS()&&!this.isStandalone()&&(u("install-container").classList.remove("hidden"),a.innerHTML=`<span>${this.translations[this.currentLang].iosInstallText}</span>`,a.classList.add("ios-guide")))},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},isStandalone(){return window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches},async handleInstall(){if(this.isIOS()){this.translations&&this.currentLang&&alert(this.translations[this.currentLang].iosInstallAlert);return}if(!this.deferredPrompt)return;this.deferredPrompt.prompt();const{outcome:e}=await this.deferredPrompt.userChoice;this.deferredPrompt=null,u("install-container")&&u("install-container").classList.add("hidden")}},_e={Config:{mins:parseInt(localStorage.getItem("currentMins")||x.DEFAULT_MINS.toString()),includeClosed:localStorage.getItem("includeClosed")==="true",get radius(){return this.mins*x.DEFAULT_SEARCH_RADIUS_MULTIPLIER},blacklist:new Set(JSON.parse(localStorage.getItem("blacklist")||localStorage.getItem("excludedTypes")||"[]")),whitelist:new Set(JSON.parse(localStorage.getItem("whitelist")||"[]")),get excluded(){return this.filterMode==="whitelist"?this.whitelist:this.blacklist},filterMode:localStorage.getItem("filterMode")||"blacklist",prices:new Set(JSON.parse(localStorage.getItem("selectedPrices")||'["1","2","3","4"]')),lang:(function(){let t=new URLSearchParams(window.location.search).get("lang")||localStorage.getItem("preferredLang");if(t&&(t.startsWith("zh")&&(t="zh"),t.startsWith("ja")&&(t="ja"),["zh","en","ja"].includes(t)))return t;const a=navigator.language||navigator.userLanguage;return a.startsWith("ja")?"ja":a.startsWith("zh")?"zh":"en"})()},Data:{userPos:null,manualLocation:null,candidates:[],currentPlace:null,lastPickedId:null,history:[],params:new URLSearchParams(window.location.search)},UI:tt,PWA:ot,translations:ze,get currentLang(){return this.Config.lang},saveSettings(){localStorage.setItem("currentMins",this.Config.mins.toString()),localStorage.setItem("includeClosed",this.Config.includeClosed),localStorage.setItem("selectedPrices",JSON.stringify(Array.from(this.Config.prices))),localStorage.setItem("blacklist",JSON.stringify(Array.from(this.Config.blacklist))),localStorage.setItem("whitelist",JSON.stringify(Array.from(this.Config.whitelist))),localStorage.setItem("filterMode",this.Config.filterMode)},setLanguage(e){if(this.currentLang===e)return;localStorage.setItem("preferredLang",e),this.saveSettings();let t=window.location.pathname+"?lang="+e;!u("result-screen").classList.contains("hidden")&&this.Data.lastPickedId&&(t+="&resId="+this.Data.lastPickedId,this.Data.userPos&&(t+=`&lat=${this.Data.userPos.lat}&lng=${this.Data.userPos.lng}`)),window.location.href=t},init(){X.clean();const e=this.translations[this.currentLang];this.UI.updateStrings(e,this.Config,this.Data),this.UI.initFilters(e,this.Config,()=>this.saveSettings()),this.setupEventListeners(),this.PWA.init(this.translations,this.currentLang),et(this),this.UI.initPhotoModal(this),this.initLocationSearch()},async initLocationSearch(){const e=u("location-input"),t=u("location-bar"),a=u("location-display"),s=u("clear-location");if(!e||!t||!a||!s)return;const r=this.translations[this.currentLang];a.textContent=r.useCurrentLocation,t.onclick=l=>{l.target.closest(".clear-icon")||(t.classList.add("hidden"),e.classList.remove("hidden"),e.focus())};const o=()=>{setTimeout(()=>{e.classList.add("hidden"),t.classList.remove("hidden")},200)};e.onblur=o,s.onclick=l=>{l.stopPropagation(),this.Data.manualLocation=null,e.value="",a.textContent=r.useCurrentLocation,s.classList.add("hidden"),B(30)};try{const{Autocomplete:l}=await google.maps.importLibrary("places"),c=new l(e,{fields:["geometry","name"],types:["geocode","establishment"]});c.addListener("place_changed",()=>{const d=c.getPlace();!d.geometry||!d.geometry.location||(this.Data.manualLocation={lat:d.geometry.location.lat(),lng:d.geometry.location.lng(),name:d.name},a.textContent="ðŸ“ "+d.name,s.classList.remove("hidden"),e.value=d.name,o(),B(50))})}catch{}},setupEventListeners(){const e=()=>this.translations[this.currentLang],t=u("find-btn");t&&(t.onclick=()=>he(this));const a=u("retry-btn");a&&(a.onclick=()=>ye(this));const s=u("share-btn");s&&(s.onclick=()=>this.UI.shareCurrentPlace(this.Data.currentPlace,e(),this.Data.userPos));const r=u("back-btn");r&&(r.onclick=()=>this.UI.showScreen("main-flow")),document.querySelectorAll(".lang-selector span").forEach(d=>{d.onclick=()=>this.setLanguage(d.dataset.lang)});const o=u("distance-slider");o&&(o.value=this.Config.mins,o.oninput=()=>{const d=parseInt(o.value);this.Config.mins=d;const f=u("distance-val");f&&(f.textContent=d),this.saveSettings(),B(10)});const l=u("include-closed-btn");l&&(l.onclick=()=>{this.Config.includeClosed=!this.Config.includeClosed,this.saveSettings(),this.UI.updateStrings(e(),this.Config,this.Data),B(x.HAPTIC_FEEDBACK_DURATION.SHORT)});const c=u("filter-mode-toggle");c&&(c.onclick=()=>{this.Config.filterMode=this.Config.filterMode==="blacklist"?"whitelist":"blacklist",this.saveSettings(),this.UI.updateStrings(e(),this.Config,this.Data),this.UI.initFilters(e(),this.Config,()=>this.saveSettings()),B(x.HAPTIC_FEEDBACK_DURATION.SHORT)})}};window.App=_e;document.addEventListener("DOMContentLoaded",()=>{_e.init()});
