(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();const Oe={zh:{title:"È£ü‰πúÂ•Ω",subtitle:"ÂîîÁü•È£üÂí©ÔºüÁ≠âÊàëÂπ´‰Ω†ÊèÄÔºÅ",distanceTitle:"ÊÉ≥ÊêµÂæíÊ≠•ÂπæËÄêÔºü",priceTitle:"ÂÉπÈå¢È†êÁÆóÔºü",filterTitle:"ËÄåÂÆ∂ÊÉ≥È£üÂí©Ôºü",filterModeWhitelist:"ËÄåÂÆ∂ÊÉ≥È£üÂí©Ôºüüòã",filterModeBlacklist:"ËÄåÂÆ∂ÂîîÊÉ≥È£üÂí©ÔºüüôÖ‚Äç‚ôÇÔ∏è",filterToggleWhitelist:"ÂàáÊèõÂà∞ÔºöÊÉ≥È£üÊ®°Âºè",filterToggleBlacklist:"ÂàáÊèõÂà∞ÔºöÂîîÊÉ≥È£üÊ®°Âºè",findBtn:"Âπ´ÊàëÊèÄÔºÅ‚ú®",openMaps:"üó∫Ô∏è Âñ∫ Google Maps ÊâìÈñã",retry:"üé≤ ÂîîÂ§ö‰∏≠ÊÑèÔºüÊäΩÈÅéÈñìÔºÅ",backBtn:"üè† ËøîÂéª‰∏ªÈ†Å",loading:"ÊêúÂ∞ãÁ∑äÈôÑËøëÂ•ΩÂò¢È£ü... üîç",noResults:"ÈôÑËøëÊêµÂîîÂà∞ÈñãÈñÄÂòÖÈ§êÂª≥ÔºåË©¶‰∏ãÊêµÈÅ†Âï≤Ôºü",noFilteredResultsWhitelist:"ÊêµÂîîÂà∞Á¨¶ÂêàÊ¢ù‰ª∂ÂòÖÈ§êÂª≥ÔºåË©¶‰∏ãÊèÄÂ§öÂπæÂÄã„ÄåËÄåÂÆ∂ÊÉ≥È£üÂí©„ÄçÔºüüîç",noFilteredResultsBlacklist:"ÊêµÂîîÂà∞Á¨¶ÂêàÊ¢ù‰ª∂ÂòÖÈ§êÂª≥ÔºåË©¶‰∏ãË™øÊï¥‰∏ã„ÄåËÄåÂÆ∂ÂîîÊÉ≥È£üÂí©„ÄçÔºüüîç",noFilteredResults:"ÊêµÂîîÂà∞Á¨¶ÂêàÁØ©ÈÅ∏Ê¢ù‰ª∂ÂòÖÈ§êÂª≥ÔºåË©¶‰∏ãË™øÊï¥‰∏ãÁØ©ÈÅ∏Âô®Ôºüüîç",geoError:"ÊãéÂîîÂà∞‰Ω†ÂÄã‰ΩçÁΩÆÔºåË´ãÊ™¢Êü•‰∏ãÊ¨äÈôê„ÄÇüìç",noGeo:"‰Ω†ÂÄãÁÄèË¶ΩÂô®ÂîîÊîØÊè¥ÂèñÁî®Âú∞ÁêÜ‰ΩçÁΩÆ„ÄÇ",locationTitle:"ÊÉ≥ÊêµÈÇäÈ†≠Ôºü",searchPlaceholder:"üîç ÊêúÂ∞ãÂú∞Èªû",useCurrentLocation:"üìç ‰ΩøÁî®Áï∂Ââç‰ΩçÁΩÆ",installBtn:"ÂÆâË£ù App üì≤",iosInstallText:"ÈªûÊìäÊü•Áúã„ÄåÂÆâË£ù App„ÄçÊïôÂ≠∏ üì≤",iosInstallAlert:`ÊÉ≥Â•Ω‰ºº App ÂíÅÁî®„ÄåÈ£ü‰πúÂ•Ω„ÄçÔºü

1. Êí≥ÁÄèË¶ΩÂô®Â∫ïÈÉ®ÂàÜ‰∫´ÈÅ∏ÂñÆ (Ê≠£ÊñπÂΩ¢Âêë‰∏äÁÆ≠È†≠)
2. Âêë‰∏äÊéÉ‰∏¶ÈªûÈÅ∏„ÄåÂä†ÂÖ•‰∏ªÁï´Èù¢„Äç(Add to Home Screen)

ÊêûÊéÇÔºÅ‚ú®`,linkCopied:"Â∑≤Ë§áË£ΩÈÄ£ÁµêÂà∞Ââ™Ë≤ºÁ∞øÔºÅüìã",categories:{chinese:"üçö ‰∏≠È§ê",japanese:"üç£ Êó•Êú¨Ëèú",korean:"üá∞üá∑ ÈüìÂúãËèú",western:"üçï Ë•øÈ§ê",se_asian:"üç≤ Êù±Âçó‰∫û",indian_middle_east:"üïå Âç∞Â∫¶/‰∏≠Êù±",noodles:"üçú Á≤âÈ∫µ",rice_bento:"üç± È£Ø/ÂÆöÈ£ü/‰æøÁï∂",sushi_sashimi:"üç£ Â£ΩÂè∏/Âà∫Ë∫´",burger_pizza:"üçï Êº¢Â†°/ËñÑÈ§Ö",hotpot_bbq:"üî• ÁÅ´Èçã/ÁáíÁÉ§",dim_sum:"ü•ü ÈªûÂøÉ/È£≤Ëå∂",fine_dining_buffet:"ü•Ç È´òÊ™î/Ëá™Âä©È§ê",all_day_brunch:"üç≥ All-day Brunch",bar_izakaya:"üçπ ÈÖíÂêß/Â±ÖÈÖíÂ±ã",spicy:"üå∂Ô∏è Ëæ£Âò¢",dessert:"üçß ÁîúÂìÅ/Á≥ñÊ∞¥",fast_food:"üçî Âø´È§ê/Â∞èÈ£ü",healthy_vege:"ü•¶ Á¥†È£ü/ÂÅ•Â∫∑"},unknownName:"ÂêçÁ®±‰∏çË©≥",noAddress:"Âú∞ÂùÄ‰∏çË©≥",ratingNew:"‚≠ê Êñ∞ÈñãÂºµÔºÅ",noHoursInfo:"Êú™ËÉΩÊèê‰æõÁáüÊ•≠ÊôÇÈñì",priceFree:"ÂÖçË≤ª",walkMins:"Ê≠•Ë°åÁ¥Ñ ${mins} ÂàÜÈêò",shareBtn:"üì§ ÂàÜ‰∫´È§êÂª≥",shareText:"ÊàëÂñ∫„ÄåÈ£ü‰πúÂ•Ω„ÄçÊäΩ‰∏≠ÂíóÂë¢ÈñìÔºö${name}ÔºÅ‰∏ÄÈΩäÂéªË©¶‰∏ãÔºüü•ó",includeClosed:"ÂåÖÂê´Â∑≤ÈóúÈñÄÈ§êÂª≥ üåô",excludeClosed:"Âè™ÈÅ∏ÁáüÊ•≠‰∏≠È§êÂª≥ ‚òÄÔ∏è",reviews:"È£üË©ï",viewAllReviews:"Êü•ÁúãÂÖ®ÈÉ®",photosTitle:"Áõ∏Áâá",viewAllPhotos:"Êü•ÁúãÂÖ®ÈÉ®"},en:{title:"What to Eat",subtitle:"Don't know? Let me pick!",distanceTitle:"Walking Distance",priceTitle:"Price Range",filterTitle:"What do you want to eat?",filterModeWhitelist:"What do you want? üòã",filterModeBlacklist:"What do you NOT want? üôÖ‚Äç‚ôÇÔ∏è",filterToggleWhitelist:"Switch to: Want",filterToggleBlacklist:"Switch to: Don't Want",findBtn:"Pick for me! ‚ú®",openMaps:"üó∫Ô∏è Open in Google Maps",retry:"üé≤ Not this one? Re-roll!",backBtn:"üè† Back to Home",loading:"Searching for delicious food... üîç",noResults:"No open restaurants found nearby. Try moving a bit?",noFilteredResultsWhitelist:"No restaurants match your filters. Try picking more items in 'What do you want'? üîç",noFilteredResultsBlacklist:"No restaurants match your filters. Try adjusting 'What do you NOT want'? üîç",noFilteredResults:"No restaurants match your filters. Try adjusting them! üîç",geoError:"Unable to find location. Check permissions.",noGeo:"Geolocation not supported by this browser.",locationTitle:"Where to eat?",searchPlaceholder:"üîç Search Location",useCurrentLocation:"üìç Use Current Location",installBtn:"Install App üì≤",iosInstallText:"How to Install App üì≤",iosInstallAlert:`Want to use 'What to Eat' like an App?

1. Tap the Share button in Safari (square with up arrow)
2. Scroll down and tap 'Add to Home Screen'

All set! ‚ú®`,linkCopied:"Link copied to clipboard! üìã",categories:{chinese:"üçö Chinese",japanese:"üç£ Japanese",korean:"üá∞üá∑ Korean",western:"üçï Western",se_asian:"üç≤ SE Asian",indian_middle_east:"üïå Indian/Middle East",noodles:"üçú Noodles",rice_bento:"üç± Rice/Bento",sushi_sashimi:"üç£ Sushi/Sashimi",burger_pizza:"üçï Burger/Pizza",hotpot_bbq:"üî• Hotpot/BBQ",dim_sum:"ü•ü Dim Sum",fine_dining_buffet:"ü•Ç Fine Dining/Buffet",all_day_brunch:"üç≥ All-day Brunch",bar_izakaya:"üçπ Bar/Izakaya",spicy:"üå∂Ô∏è Spicy",dessert:"üçß Dessert",fast_food:"üçî Fast Food",healthy_vege:"ü•¶ Healthy/Vege"},unknownName:"Unknown",noAddress:"Address Unknown",ratingNew:"‚≠ê New!",noHoursInfo:"No opening hours info",priceFree:"Free",walkMins:"üö∂ ${mins} min walk",shareBtn:"üì§ Share",shareText:"I picked this on What to Eat: ${name}! Want to try? ü•ó",includeClosed:"Includes Closed Restaurants üåô",excludeClosed:"Open Restaurants Only ‚òÄÔ∏è",reviews:"Reviews",viewAllReviews:"View All",photosTitle:"Photos",viewAllPhotos:"View All"},ja:{title:"„É°„Ç∑Ê±∫",subtitle:"Ëø∑„Å£„Åü„Çâ„ÄÅÁßÅ„Å´ÈÅ∏„Å∞„Åõ„Å¶ÔºÅ",distanceTitle:"ÂæíÊ≠©‰ΩïÂàÜÔºü",priceTitle:"‰∫àÁÆó„ÅØÔºü",filterTitle:"‰Ωï„ÅåÈ£ü„Åπ„Åü„ÅÑÔºü",filterModeWhitelist:"‰Ωï„ÅåÈ£ü„Åπ„Åü„ÅÑÔºü üòã",filterModeBlacklist:"È£ü„Åπ„Åü„Åè„Å™„ÅÑ„ÇÇ„ÅÆ„ÅØÔºü üôÖ‚Äç‚ôÇÔ∏è",filterToggleWhitelist:"È£ü„Åπ„Åü„ÅÑ„É¢„Éº„Éâ„Å∏",filterToggleBlacklist:"È£ü„Åπ„Åü„Åè„Å™„ÅÑ„É¢„Éº„Éâ„Å∏",findBtn:"ÈÅ∏„Çì„ÅßÔºÅ ‚ú®",openMaps:"üó∫Ô∏è Google„Éû„ÉÉ„Éó„ÅßÈñã„Åè",retry:"üé≤ ‰ªñ„ÅÆ„Åå„ÅÑ„ÅÑÔºÅ",backBtn:"üè† „Éõ„Éº„É†„Å´Êàª„Çã",loading:"Ëøë„Åè„ÅÆÁæéÂë≥„Åó„ÅÑÂ∫ó„ÇíÊé¢„Åó„Å¶„ÅÑ„Åæ„Åô... üîç",noResults:"Ëøë„Åè„Å´Âñ∂Ê•≠‰∏≠„ÅÆÂ∫ó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ",noFilteredResultsWhitelist:"Êù°‰ª∂„Å´Âêà„ÅÜÂ∫ó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Äå‰Ωï„ÅåÈ£ü„Åπ„Åü„ÅÑ„Äç„ÇíË™øÊï¥„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇüîç",noFilteredResultsBlacklist:"Êù°‰ª∂„Å´Âêà„ÅÜÂ∫ó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„ÄåÈ£ü„Åπ„Åü„Åè„Å™„ÅÑ„Äç„ÇíË™øÊï¥„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇüîç",noFilteredResults:"Êù°‰ª∂„Å´Âêà„ÅÜÂ∫ó„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„ÄÇ„Éï„Ç£„É´„Çø„Éº„ÇíË™øÊï¥„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇüîç",geoError:"‰ΩçÁΩÆÊÉÖÂ†±„ÇíÂèñÂæó„Åß„Åç„Åæ„Åõ„Çì„ÄÇË®≠ÂÆö„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",noGeo:"„Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØ‰ΩçÁΩÆÊÉÖÂ†±„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ",locationTitle:"„Å©„ÅÆËæ∫„ÅßÈ£ü„Åπ„ÇãÔºü",searchPlaceholder:"üîç Â†¥ÊâÄ„ÇíÊ§úÁ¥¢",useCurrentLocation:"üìç ÁèæÂú®Âú∞„Çí‰ΩøÁî®",installBtn:"„Ç¢„Éó„É™„Çí„Ç§„É≥„Çπ„Éà„Éº„É´ üì≤",iosInstallText:"„Ç¢„Éó„É™„ÅÆ„Ç§„É≥„Çπ„Éà„Éº„É´ÊñπÊ≥ï üì≤",iosInstallAlert:`„Äå‰ΩïÈ£ü„Åπ„ÇãÔºü„Äç„Çí„Ç¢„Éó„É™„ÅÆ„Çà„ÅÜ„Å´‰Ωø„ÅÜÊñπÊ≥ïÔºö

1. Safari „ÅÆÂÖ±Êúâ„Ç¢„Ç§„Ç≥„É≥ÔºàÂõõËßí„Å´‰∏äÁü¢Âç∞Ôºâ„Çí„Çø„ÉÉ„Éó
2. ‰∏ã„Å´„Çπ„ÇØ„É≠„Éº„É´„Åó„Å¶„Äå„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Äç„Çí„Çø„ÉÉ„Éó

ÂÆå‰∫Ü„Åß„ÅôÔºÅ‚ú®`,linkCopied:"„ÇØ„É™„ÉÉ„Éó„Éú„Éº„Éâ„Å´„Ç≥„Éî„Éº„Åó„Åæ„Åó„ÅüÔºÅüìã",categories:{chinese:"üçö ‰∏≠ËèØÊñôÁêÜ",japanese:"üç£ Êó•Êú¨ÊñôÁêÜ",korean:"üá∞üá∑ ÈüìÂõΩÊñôÁêÜ",western:"üçï Ê¥ãÈ£ü",se_asian:"üç≤ Êù±Âçó‰∫û",indian_middle_east:"üïå „Ç§„É≥„Éâ/‰∏≠Êù±ÊñôÁêÜ",noodles:"üçú È∫∫È°û",rice_bento:"üç± „ÅîÈ£Ø/ÂÆöÈ£ü/ÂºÅÂΩì",sushi_sashimi:"üç£ ÂØøÂè∏/Âà∫Ë∫´",burger_pizza:"üçï „Éê„Éº„Ç¨„Éº/„Éî„Ç∂",hotpot_bbq:"üî• ÁÅ´Èçã/ÁÑºËÇâ",dim_sum:"ü•ü ÁÇπÂøÉ",fine_dining_buffet:"ü•Ç È´òÁ¥ö/„Éì„É•„ÉÉ„Éï„Çß",all_day_brunch:"üç≥ „Éñ„É©„É≥„ÉÅ",bar_izakaya:"üçπ „Éê„Éº/Â±ÖÈÖíÂ±ã",spicy:"üå∂Ô∏è Ëæõ„ÅÑÊñôÁêÜ",dessert:"üçß „Éá„Ç∂„Éº„Éà",fast_food:"üçî „Éï„Ç°„Çπ„Éà„Éï„Éº„Éâ",healthy_vege:"ü•¶ „Éò„É´„Ç∑„Éº/„Éô„Ç∏"},unknownName:"‰∏çÊòé",noAddress:"‰ΩèÊâÄ‰∏çÊòé",ratingNew:"‚≠ê Êñ∞Ë¶è„Ç™„Éº„Éó„É≥ÔºÅ",noHoursInfo:"Âñ∂Ê•≠ÊôÇÈñìÊÉÖÂ†±„Å™„Åó",priceFree:"ÁÑ°Êñô",walkMins:"üö∂ ÂæíÊ≠© ${mins} ÂàÜ",shareBtn:"üì§ „Ç∑„Çß„Ç¢",shareText:"„Äå„É°„Ç∑Ê±∫„Äç„Åß„Åì„Çå„ÇíÈÅ∏„Çì„Å†„ÇàÔºö${name}ÔºÅ‰∏ÄÁ∑í„Å´„Å©„ÅÜÔºüü•ó",includeClosed:"Âñ∂Ê•≠ÊôÇÈñìÂ§ñ„ÇÇÂê´„ÇÄ üåô",excludeClosed:"Âñ∂Ê•≠‰∏≠„ÅÆ„Åø ‚òÄÔ∏è",reviews:"Âè£„Ç≥„Éü",viewAllPhotos:"„ÇÇ„Å£„Å®Ë¶ã„Çã",photosTitle:"ÂÜôÁúü",viewAllReviews:"„ÇÇ„Å£„Å®Ë¶ã„Çã"}},u=e=>document.getElementById(e);function Be(e={}){return new Promise((t,s)=>{if(!navigator.geolocation){s(new Error("GEOLOCATION_NOT_SUPPORTED"));return}navigator.geolocation.getCurrentPosition(t,s,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0,...e})})}function se(e,t){if(!t||t.length===0)return!1;const s=(e.name||"").toLowerCase(),o=e.types||[];return t.some(r=>s.includes(r.toLowerCase())||o.some(l=>l.toLowerCase().includes(r.toLowerCase())))}const $={chinese:["chinese_restaurant","asian_restaurant","chinese","cantonese","shanghainese","sichuan","dim sum","congee","‰∏≠Ëèú","‰∏≠Âºè","Á≤µËèú","‰∏äÊµ∑","Â∑ùËèú","‰∫¨Ëèú","ÈªûÂøÉ","Á≤•","ÁáíÂë≥"],japanese:["japanese_restaurant","sushi_restaurant","ramen_restaurant","japanese","sushi","ramen","izakaya","udon","soba","yakitori","tonkatsu","Êó•Êú¨","Â£ΩÂè∏","ÊãâÈ∫µ","Â±ÖÈÖíÂ±ã","ÁÉèÂÜ¨","ËïéÈ∫•","ÁáíÈ≥•","‰∏º","Â§©Â©¶ÁæÖ"],korean:["korean_restaurant","korean","kimchi","bibimbap","bbq","ÈüìÂúã","ÈüìÂºè","Ê≥°Ëèú","È£ØÂç∑","ÈüìÁáí","ÁÇ∏Èõû"],western:["italian_restaurant","french_restaurant","american_restaurant","hamburger_restaurant","pizza_restaurant","steak_house","brazilian_restaurant","greek_restaurant","mediterranean_restaurant","mexican_restaurant","seafood_restaurant","spanish_restaurant","buffet_restaurant","fine_dining_restaurant","steak","italian","french","burger","pasta","pizza","western","mexican","spanish","Ë•øÈ§ê","ÊÑèÂºè","Ê≥ïÂºè","Êº¢Â†°","ËñÑÈ§Ö","ÁâõÊâí","ÊâíÊàø","Ëá™Âä©È§ê"],se_asian:["thai_restaurant","vietnamese_restaurant","indonesian_restaurant","thai","vietnamese","malaysian","singaporean","indonesian","Ê≥∞Âúã","Ë∂äÂçó","ÊòüÈ¶¨","Âç∞Â∞º","Ê≥∞Âºè","Ë∂äÂºè","Êµ∑ÂçóÈõû","ÂÜ¨Ëî≠Âäü","ÂñáÊ≤ô"],noodles:["ramen_restaurant","noodle","ramen","udon","pho","Á±≥Á∑ö","ÊãâÈ∫µ","È∫µ","Á≤â","Ê≤≥","Èõ≤Âêû"],spicy:["spicy","sichuan","mala","chili","Â∑ùËèú","È∫ªËæ£","Ëæ£","Ê∞¥ÁÖÆ","ÈÖ∏Ëæ£","ÊπòËèú"],hotpot_bbq:["barbecue_restaurant","steak_house","hot pot","hotpot","bbq","barbecue","grill","yakiniku","ÁÅ´Èçã","ÈõûÁÖ≤","ÁáíËÇâ","ÈüìÁáí","ÁáíÁÉ§","‰∏≤Ááí","ÊâìÈÇäÁàê","ËÇâ","Êâí","bbq"],dim_sum:["chinese_restaurant","dim sum","yum cha","dumpling","ÈªûÂøÉ","È£≤Ëå∂","È§ÉÂ≠ê","ÁõÖÈ£Ø","ÂåÖÈªû"],dessert:["bakery","ice_cream_shop","dessert_restaurant","dessert_shop","confectionery","chocolate_factory","chocolate_shop","candy_store","donut_shop","dessert","sugar","sweet","bakery","cake","ice cream","Á≥ñÊ∞¥","Áîú","Èõ™Á≥ï","ÂÜ∞","ËõãÁ≥ï","È§Ö","Áè≠Êàü"],fast_food:["fast_food_restaurant","hamburger_restaurant","sandwich_shop","fast food","food_court","mcdonald","kfc","burger","sandwich","Âø´È§ê","Â∞èÈ£ü","Êº¢Â†°","‰∏âÊñáÊ≤ª","ÁÇ∏Èõû","ÁÜ±Áãó","deli"],indian_middle_east:["indian_restaurant","lebanese_restaurant","turkish_restaurant","middle_eastern_restaurant","afghani_restaurant","indian","curry","middle eastern","kebab","Âç∞Â∫¶","ÂíñÂì©","‰∏≠Êù±","ÂúüËÄ≥ÂÖ∂"],healthy_vege:["vegan_restaurant","vegetarian_restaurant","acai_shop","juice_shop","vegan","vegetarian","healthy","organic","salad","Á¥†È£ü","ÂÅ•Â∫∑","Ê≤ôÂæã","ÊúâÊ©ü"],sushi_sashimi:["sushi_restaurant","japanese_restaurant","sushi","sashimi","Â£ΩÂè∏","Âà∫Ë∫´","Êó•Êú¨","omakase"],burger_pizza:["hamburger_restaurant","pizza_restaurant","burger","pizza","Êº¢Â†°","ËñÑÈ§Ö","Êº¢Â†°ÂåÖ","ÊÑèÁ≤â"],rice_bento:["restaurant","bento","rice","donburi","È£Ø","ÂÆöÈ£ü","‰æøÁï∂","‰∏º","ÁõÖÈ£Ø","ÁÖ≤‰ªîÈ£Ø"],fine_dining_buffet:["fine_dining_restaurant","buffet_restaurant","steak_house","french_restaurant","È´òÁ¥ö","ÊÖ∂Á•ù","Ëá™Âä©È§ê","ÊîæÈ°å","omakase","fine dining","buffet"],all_day_brunch:["breakfast_restaurant","brunch_restaurant","cafe","tea_house","brunch","breakfast","pancake","ÂÖ®Êó•Êó©È§ê","Êó©ÂçàÈ§ê","Áè≠Êàü","ËàíËäôËïæ","È¨ÜÈ§Ö","cat_cafe","dog_cafe"],bar_izakaya:["bar","bar_and_grill","izakaya","pub","ÈÖí","Â±ÖÈÖíÂ±ã","ÈÖíÂêß","‰∏≤Ááí","yakitori","kebab","bar","wine_bar"]},Fe=["asian_restaurant","chinese_restaurant","indian_restaurant","indonesian_restaurant","japanese_restaurant","korean_restaurant","ramen_restaurant","sushi_restaurant","thai_restaurant","vietnamese_restaurant","lebanese_restaurant","turkish_restaurant","middle_eastern_restaurant","afghani_restaurant","african_restaurant","american_restaurant","barbecue_restaurant","brazilian_restaurant","french_restaurant","greek_restaurant","italian_restaurant","mediterranean_restaurant","mexican_restaurant","pizza_restaurant","seafood_restaurant","spanish_restaurant","steak_house","buffet_restaurant","fine_dining_restaurant","restaurant","bar_and_grill","bar","vegan_restaurant","vegetarian_restaurant","cat_cafe","chinese_restaurant","chocolate_factory","chocolate_shop","coffee_shop","confectionery","deli","dessert_restaurant","dessert_shop","diner","dog_cafe","donut_shop","fast_food_restaurant","fine_dining_restaurant","food_court","french_restaurant","greek_restaurant","hamburger_restaurant","ice_cream_shop","indian_restaurant","indonesian_restaurant","italian_restaurant","japanese_restaurant","juice_shop","korean_restaurant","lebanese_restaurant","meal_delivery","meal_takeaway","mediterranean_restaurant","mexican_restaurant","middle_eastern_restaurant","pizza_restaurant","pub","ramen_restaurant","restaurant","sandwich_shop","seafood_restaurant","spanish_restaurant","steak_house","sushi_restaurant","tea_house","thai_restaurant","turkish_restaurant","vegan_restaurant","vegetarian_restaurant","vietnamese_restaurant","wine_bar"],J=["id","displayName","location","rating","userRatingCount","regularOpeningHours","priceLevel","businessStatus","types","utcOffsetMinutes"],ie=["id","formattedAddress","regularOpeningHours","nationalPhoneNumber","photos","reviews","googleMapsURI"],oe={PRICE_LEVEL_FREE:{val:"0",label:e=>e.priceFree},PRICE_LEVEL_INEXPENSIVE:{val:"1",label:()=>"$"},PRICE_LEVEL_MODERATE:{val:"2",label:()=>"$$"},PRICE_LEVEL_EXPENSIVE:{val:"3",label:()=>"$$$"},PRICE_LEVEL_VERY_EXPENSIVE:{val:"4",label:()=>"$$$$"}},K={0:"PRICE_LEVEL_FREE",1:"PRICE_LEVEL_INEXPENSIVE",2:"PRICE_LEVEL_MODERATE",3:"PRICE_LEVEL_EXPENSIVE",4:"PRICE_LEVEL_VERY_EXPENSIVE"},W={DEFAULT_SEARCH_RADIUS_MULTIPLIER:80,DEFAULT_MINS:5,HAPTIC_FEEDBACK_DURATION:{SHORT:30},METERS_PER_DEGREE_LAT:111320};function Z(e,t){return{id:e.id||e.place_id,name:typeof e.displayName=="string"?e.displayName:e.displayName?.text||t.unknownName,rating:e.rating,userRatingCount:e.userRatingCount||0,vicinity:e.formattedAddress||e.vicinity||t.noAddress,types:e.types||[],priceLevel:e.priceLevel,phone:e.nationalPhoneNumber,businessStatus:e.businessStatus,location:e.location,openingHours:e.regularOpeningHours,isOpen:null,durationText:null,durationValue:null,photos:e.photos||[],reviews:e.reviews||[],googleMapsURI:e.googleMapsURI}}async function le(e){e.UI.triggerHaptic(50),e.UI.showScreen("loading-screen"),e.Data.history=[];const t=e.translations[e.currentLang];try{let s;e.Data.manualLocation?s={coords:{latitude:e.Data.manualLocation.lat,longitude:e.Data.manualLocation.lng}}:s=await Be();const{latitude:o,longitude:r}=s.coords;e.Data.userPos={lat:o,lng:r};const{Place:l}=await google.maps.importLibrary("places"),c=await ce(l,e.Data.userPos,e.Config.radius,e);if(!c||c.length===0){alert(t.noResults),e.UI.showScreen("main-flow");return}const d=await de(c,e.Data.userPos,e);if(d.length===0){const g=e.Config.filterMode==="whitelist"?t.noFilteredResultsWhitelist:t.noFilteredResultsBlacklist;alert(g),e.UI.showScreen("main-flow");return}e.Data.candidates=d;const i=d[Math.floor(Math.random()*d.length)];e.Data.currentPlace=await ue(l,i,e),e.UI.startSlotAnimation(e)}catch(s){console.error("Search Error:",s),He(s,t,e)}}async function ce(e,t,s,o){const r=s*.6,l=r/W.METERS_PER_DEGREE_LAT,c=r/(W.METERS_PER_DEGREE_LAT*Math.cos(t.lat*Math.PI/180)),d=[{lat:t.lat,lng:t.lng},{lat:t.lat-l,lng:t.lng-c},{lat:t.lat+l,lng:t.lng-c},{lat:t.lat-l,lng:t.lng+c},{lat:t.lat+l,lng:t.lng+c}],i=[],g=new Set,p=[],h=Fe;if(o.Config.filterMode==="whitelist"&&o.Config.excluded.size>0){const P=new Set(h),R=new Set;o.Config.excluded.forEach(D=>{($[D]||[]).forEach(U=>{P.has(U)&&R.add(U)})});const y=Array.from(R);if(y.length>0)for(let D=0;D<y.length;D+=20)p.push(y.slice(D,D+20))}else if(o.Config.filterMode==="blacklist"&&o.Config.excluded.size>0){const P=new Set;o.Config.excluded.forEach(y=>{($[y]||[]).forEach(V=>{(V.includes("_")||/^[a-z]+$/.test(V))&&P.add(V)})});const R=h.filter(y=>!P.has(y));if(R.length>0)for(let y=0;y<R.length;y+=20)p.push(R.slice(y,y+20))}p.length===0&&p.push(h.slice(0,20),h.slice(20,40),h.slice(40));const L=async(P,R)=>{const y={locationRestriction:{center:P,radius:s},includedPrimaryTypes:R,fields:J,maxResultCount:20,rankPreference:"DISTANCE"};try{const{places:D}=await e.searchNearby(y);return D||[]}catch(D){return console.warn("Fetch error:",D),[]}},N=P=>{let R=0;return P.forEach(y=>{y&&y.id&&!g.has(y.id)&&(g.add(y.id),i.push(y),R++)}),R};for(const P of p){if(!P||P.length===0)continue;const R=await L(d[0],P);if(N(R),R.length<20)continue;const y=await Promise.all([L(d[1],P),L(d[4],P)]);let D=0;if(y.forEach(U=>{D+=N(U)}),D===0)continue;(await Promise.all([L(d[2],P),L(d[3],P)])).forEach(U=>N(U))}return i}async function de(e,t,s){const o=s.translations[s.currentLang],l=(await Promise.all(e.map(async i=>{const g=Z(i,o);try{g.isOpen=await i.isOpen()}catch{g.isOpen=null}return g.isOpen===null&&(g.isOpen=g.openingHours?.periods?Ue(g.openingHours.periods):g.openingHours?.openNow),g}))).filter(i=>i.businessStatus!=="OPERATIONAL"&&i.businessStatus?!1:s.Config.includeClosed||i.isOpen!==!1),c=await he(t,l);let d=c.filter(i=>!i.durationValue||i.durationValue/60<=s.Config.mins);return d.length===0&&(d=c.sort((i,g)=>(i.durationValue||9999)-(g.durationValue||9999)).slice(0,3)),d.filter(i=>{const g=Array.from(s.Config.excluded),p=g.some(h=>se(i,$[h]));if(s.Config.filterMode==="whitelist"){if(g.length>0&&!p)return!1}else if(p)return!1;if(i.priceLevel!==void 0&&i.priceLevel!==null){const h=K[i.priceLevel]||i.priceLevel,L=oe[h];if(L&&s.Config.prices.size>0&&!s.Config.prices.has(L.val))return!1}return!0})}function Ue(e){if(!e||!Array.isArray(e)||e.length===0)return null;if(e.length===1&&!e[0].close)return!0;const t=new Date,s=t.getDay()*1440+t.getHours()*60+t.getMinutes(),o=10080;for(const r of e){if(!r.open||!r.close)continue;const l=Number(r.open.day)*1440+Number(r.open.hour)*60+Number(r.open.minute);let c=Number(r.close.day)*1440+Number(r.close.hour)*60+Number(r.close.minute);if(c<=l&&(c+=o),s>=l&&s<c||s+o>=l&&s+o<c)return!0}return!1}async function ue(e,t,s){if(!t||!t.id)return t;const o=`place_detail_${t.id}`,r=Date.now(),l=1440*60*1e3,c=d=>d&&d.map(i=>({...i,getURI:g=>i.cachedURI||""}));try{const d=localStorage.getItem(o);if(d){const{data:i,timestamp:g}=JSON.parse(d);if(r-g<l){i.photos&&(i.photos=c(i.photos)),delete i.durationText,delete i.durationValue,delete i.distanceText,delete i.distanceValue;const{durationText:p,durationValue:h}=t;return Object.assign(t,i),p&&(t.durationText=p),h&&(t.durationValue=h),t}}}catch(d){console.warn("Cache read error:",d)}try{const d=new e({id:t.id});await d.fetchFields({fields:[...J,...ie]});const i=Z(d,s.translations[s.currentLang]);d.photos&&d.photos.length>0&&(i.photos=d.photos.map(h=>({cachedURI:h.getURI({maxHeight:1e3}),widthPx:h.widthPx,heightPx:h.heightPx,authorAttributions:h.authorAttributions})));const{durationText:g,durationValue:p}=t;Object.assign(t,i),g&&(t.durationText=g),p&&(t.durationValue=p),localStorage.setItem(o,JSON.stringify({data:i,timestamp:r})),t.photos&&(t.photos=c(t.photos))}catch(d){console.error("Error fetching place details:",d)}return t}function He(e,t,s){e.message==="GEOLOCATION_NOT_SUPPORTED"?alert(t.noGeo):e.code===1?alert(t.geoError):alert("Error: "+e.message),s.UI.showScreen("main-flow")}async function he(e,t){if(t.length===0)return[];const s=25,o=[];for(let c=0;c<t.length;c+=s)o.push(t.slice(c,c+s));const r=new google.maps.DistanceMatrixService;return(await Promise.all(o.map(c=>new Promise(d=>{r.getDistanceMatrix({origins:[e],destinations:c.map(i=>i.location),travelMode:google.maps.TravelMode.WALKING,unitSystem:google.maps.UnitSystem.METRIC},(i,g)=>{if(g!=="OK"){d(c.map(h=>({...h,durationText:null,durationValue:null})));return}const p=i.rows[0].elements;d(c.map((h,L)=>({...h,durationText:p[L].status==="OK"?p[L].duration.text:null,durationValue:p[L].status==="OK"?p[L].duration.value:null})))})})))).flat()}async function fe(e){if(e.UI.triggerHaptic([50,30,50]),e.Data.candidates.length===0)return le(e);let t=e.Data.candidates;if(t.length>1){const l=new Set(e.Data.history||[]),c=t.filter(d=>!l.has(d.id));if(c.length>0)t=c;else if(e.Data.lastPickedId){const d=t.filter(i=>i.id!==e.Data.lastPickedId);d.length>0&&(t=d)}}let s=t[Math.floor(Math.random()*t.length)];const{Place:o}=await google.maps.importLibrary("places"),r=await ue(o,s,e);e.UI.showResult(e,r)}async function ze(e){const t=e.Data.params.get("resId");if(t){window.history.replaceState({},document.title,window.location.pathname),e.UI.showScreen("loading-screen");try{const{Place:s}=await google.maps.importLibrary("places"),o=new s({id:t});await o.fetchFields({fields:[...J,...ie]});const r=parseFloat(e.Data.params.get("lat")),l=parseFloat(e.Data.params.get("lng"));!isNaN(r)&&!isNaN(l)&&(e.Data.userPos={lat:r,lng:l});const c=e.translations[e.currentLang],d=Z(o,c);if(e.Data.userPos&&d.location){const[i]=await he(e.Data.userPos,[d]);d.durationValue=i.durationValue,d.durationText=i.durationText}if(e.Data.userPos){const i=await ce(s,e.Data.userPos,e.Config.radius,e);i&&i.length>0&&(e.Data.candidates=await de(i,e.Data.userPos,e))}e.UI.showResult(e,d,{fromShare:!0})}catch(s){console.error("Session restoration failed:",s),e.UI.showScreen("main-flow")}}}function We(){const e=()=>{const t=Date.now(),s=1440*60*1e3;let o=0;try{for(let r=0;r<localStorage.length;r++){const l=localStorage.key(r);if(l&&l.startsWith("place_detail_"))try{const c=localStorage.getItem(l);if(c){const{timestamp:d}=JSON.parse(c);t-d>s&&(localStorage.removeItem(l),o++,r--)}}catch{localStorage.removeItem(l)}}}catch(r){console.warn("Garbage collection failed:",r)}};"requestIdleCallback"in window?requestIdleCallback(e,{timeout:5e3}):setTimeout(e,2e3)}var X={};(function e(t,s,o,r){var l=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",d=(function(){if(!t.OffscreenCanvas)return!1;try{var a=new OffscreenCanvas(1,1),n=a.getContext("2d");n.fillRect(0,0,1,1);var f=a.transferToImageBitmap();n.createPattern(f,"no-repeat")}catch{return!1}return!0})();function i(){}function g(a){var n=s.exports.Promise,f=n!==void 0?n:t.Promise;return typeof f=="function"?new f(a):(a(i,i),null)}var p=(function(a,n){return{transform:function(f){if(a)return f;if(n.has(f))return n.get(f);var v=new OffscreenCanvas(f.width,f.height),w=v.getContext("2d");return w.drawImage(f,0,0),n.set(f,v),v},clear:function(){n.clear()}}})(d,new Map),h=(function(){var a=Math.floor(16.666666666666668),n,f,v={},w=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(n=function(_){var b=Math.random();return v[b]=requestAnimationFrame(function m(C){w===C||w+a-1<C?(w=C,delete v[b],_()):v[b]=requestAnimationFrame(m)}),b},f=function(_){v[_]&&cancelAnimationFrame(v[_])}):(n=function(_){return setTimeout(_,a)},f=function(_){return clearTimeout(_)}),{frame:n,cancel:f}})(),L=(function(){var a,n,f={};function v(w){function _(b,m){w.postMessage({options:b||{},callback:m})}w.init=function(m){var C=m.transferControlToOffscreen();w.postMessage({canvas:C},[C])},w.fire=function(m,C,I){if(n)return _(m,null),n;var S=Math.random().toString(36).slice(2);return n=g(function(M){function T(x){x.data.callback===S&&(delete f[S],w.removeEventListener("message",T),n=null,p.clear(),I(),M())}w.addEventListener("message",T),_(m,S),f[S]=T.bind(null,{data:{callback:S}})}),n},w.reset=function(){w.postMessage({reset:!0});for(var m in f)f[m](),delete f[m]}}return function(){if(a)return a;if(!o&&l){var w=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([w])))}catch(_){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("üéä Could not load worker",_),null}v(a)}return a}})(),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function P(a,n){return n?n(a):a}function R(a){return a!=null}function y(a,n,f){return P(a&&R(a[n])?a[n]:N[n],f)}function D(a){return a<0?0:Math.floor(a)}function V(a,n){return Math.floor(Math.random()*(n-a))+a}function U(a){return parseInt(a,16)}function ge(a){return a.map(me)}function me(a){var n=String(a).replace(/[^0-9a-f]/gi,"");return n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),{r:U(n.substring(0,2)),g:U(n.substring(2,4)),b:U(n.substring(4,6))}}function ve(a){var n=y(a,"origin",Object);return n.x=y(n,"x",Number),n.y=y(n,"y",Number),n}function pe(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function ye(a){var n=a.getBoundingClientRect();a.width=n.width,a.height=n.height}function we(a){var n=document.createElement("canvas");return n.style.position="fixed",n.style.top="0px",n.style.left="0px",n.style.pointerEvents="none",n.style.zIndex=a,n}function _e(a,n,f,v,w,_,b,m,C){a.save(),a.translate(n,f),a.rotate(_),a.scale(v,w),a.arc(0,0,1,b,m,C),a.restore()}function be(a){var n=a.angle*(Math.PI/180),f=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-n+(.5*f-Math.random()*f),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function Ce(a,n){n.x+=Math.cos(n.angle2D)*n.velocity+n.drift,n.y+=Math.sin(n.angle2D)*n.velocity+n.gravity,n.velocity*=n.decay,n.flat?(n.wobble=0,n.wobbleX=n.x+10*n.scalar,n.wobbleY=n.y+10*n.scalar,n.tiltSin=0,n.tiltCos=0,n.random=1):(n.wobble+=n.wobbleSpeed,n.wobbleX=n.x+10*n.scalar*Math.cos(n.wobble),n.wobbleY=n.y+10*n.scalar*Math.sin(n.wobble),n.tiltAngle+=.1,n.tiltSin=Math.sin(n.tiltAngle),n.tiltCos=Math.cos(n.tiltAngle),n.random=Math.random()+2);var f=n.tick++/n.totalTicks,v=n.x+n.random*n.tiltCos,w=n.y+n.random*n.tiltSin,_=n.wobbleX+n.random*n.tiltCos,b=n.wobbleY+n.random*n.tiltSin;if(a.fillStyle="rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(1-f)+")",a.beginPath(),c&&n.shape.type==="path"&&typeof n.shape.path=="string"&&Array.isArray(n.shape.matrix))a.fill(Ie(n.shape.path,n.shape.matrix,n.x,n.y,Math.abs(_-v)*.1,Math.abs(b-w)*.1,Math.PI/10*n.wobble));else if(n.shape.type==="bitmap"){var m=Math.PI/10*n.wobble,C=Math.abs(_-v)*.1,I=Math.abs(b-w)*.1,S=n.shape.bitmap.width*n.scalar,M=n.shape.bitmap.height*n.scalar,T=new DOMMatrix([Math.cos(m)*C,Math.sin(m)*C,-Math.sin(m)*I,Math.cos(m)*I,n.x,n.y]);T.multiplySelf(new DOMMatrix(n.shape.matrix));var x=a.createPattern(p.transform(n.shape.bitmap),"no-repeat");x.setTransform(T),a.globalAlpha=1-f,a.fillStyle=x,a.fillRect(n.x-S/2,n.y-M/2,S,M),a.globalAlpha=1}else if(n.shape==="circle")a.ellipse?a.ellipse(n.x,n.y,Math.abs(_-v)*n.ovalScalar,Math.abs(b-w)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI):_e(a,n.x,n.y,Math.abs(_-v)*n.ovalScalar,Math.abs(b-w)*n.ovalScalar,Math.PI/10*n.wobble,0,2*Math.PI);else if(n.shape==="star")for(var E=Math.PI/2*3,O=4*n.scalar,B=8*n.scalar,F=n.x,z=n.y,j=5,H=Math.PI/j;j--;)F=n.x+Math.cos(E)*B,z=n.y+Math.sin(E)*B,a.lineTo(F,z),E+=H,F=n.x+Math.cos(E)*O,z=n.y+Math.sin(E)*O,a.lineTo(F,z),E+=H;else a.moveTo(Math.floor(n.x),Math.floor(n.y)),a.lineTo(Math.floor(n.wobbleX),Math.floor(w)),a.lineTo(Math.floor(_),Math.floor(b)),a.lineTo(Math.floor(v),Math.floor(n.wobbleY));return a.closePath(),a.fill(),n.tick<n.totalTicks}function Ee(a,n,f,v,w){var _=n.slice(),b=a.getContext("2d"),m,C,I=g(function(S){function M(){m=C=null,b.clearRect(0,0,v.width,v.height),p.clear(),w(),S()}function T(){o&&!(v.width===r.width&&v.height===r.height)&&(v.width=a.width=r.width,v.height=a.height=r.height),!v.width&&!v.height&&(f(a),v.width=a.width,v.height=a.height),b.clearRect(0,0,v.width,v.height),_=_.filter(function(x){return Ce(b,x)}),_.length?m=h.frame(T):M()}m=h.frame(T),C=M});return{addFettis:function(S){return _=_.concat(S),I},canvas:a,promise:I,reset:function(){m&&h.cancel(m),C&&C()}}}function Y(a,n){var f=!a,v=!!y(n||{},"resize"),w=!1,_=y(n,"disableForReducedMotion",Boolean),b=l&&!!y(n||{},"useWorker"),m=b?L():null,C=f?pe:ye,I=a&&m?!!a.__confetti_initialized:!1,S=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,M;function T(E,O,B){for(var F=y(E,"particleCount",D),z=y(E,"angle",Number),j=y(E,"spread",Number),H=y(E,"startVelocity",Number),Se=y(E,"decay",Number),Te=y(E,"gravity",Number),Pe=y(E,"drift",Number),ee=y(E,"colors",ge),ke=y(E,"ticks",Number),te=y(E,"shapes"),Re=y(E,"scalar"),xe=!!y(E,"flat"),ne=ve(E),ae=F,q=[],De=a.width*ne.x,Ne=a.height*ne.y;ae--;)q.push(be({x:De,y:Ne,angle:z,spread:j,startVelocity:H,color:ee[ae%ee.length],shape:te[V(0,te.length)],ticks:ke,decay:Se,gravity:Te,drift:Pe,scalar:Re,flat:xe}));return M?M.addFettis(q):(M=Ee(a,q,C,O,B),M.promise)}function x(E){var O=_||y(E,"disableForReducedMotion",Boolean),B=y(E,"zIndex",Number);if(O&&S)return g(function(H){H()});f&&M?a=M.canvas:f&&!a&&(a=we(B),document.body.appendChild(a)),v&&!I&&C(a);var F={width:a.width,height:a.height};m&&!I&&m.init(a),I=!0,m&&(a.__confetti_initialized=!0);function z(){if(m){var H={getBoundingClientRect:function(){if(!f)return a.getBoundingClientRect()}};C(H),m.postMessage({resize:{width:H.width,height:H.height}});return}F.width=F.height=null}function j(){M=null,v&&(w=!1,t.removeEventListener("resize",z)),f&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,I=!1)}return v&&!w&&(w=!0,t.addEventListener("resize",z,!1)),m?m.fire(E,F,j):T(E,F,j)}return x.reset=function(){m&&m.reset(),M&&M.reset()},x}var A;function Q(){return A||(A=Y(null,{useWorker:!0,resize:!0})),A}function Ie(a,n,f,v,w,_,b){var m=new Path2D(a),C=new Path2D;C.addPath(m,new DOMMatrix(n));var I=new Path2D;return I.addPath(C,new DOMMatrix([Math.cos(b)*w,Math.sin(b)*w,-Math.sin(b)*_,Math.cos(b)*_,f,v])),I}function Le(a){if(!c)throw new Error("path confetti are not supported in this browser");var n,f;typeof a=="string"?n=a:(n=a.path,f=a.matrix);var v=new Path2D(n),w=document.createElement("canvas"),_=w.getContext("2d");if(!f){for(var b=1e3,m=b,C=b,I=0,S=0,M,T,x=0;x<b;x+=2)for(var E=0;E<b;E+=2)_.isPointInPath(v,x,E,"nonzero")&&(m=Math.min(m,x),C=Math.min(C,E),I=Math.max(I,x),S=Math.max(S,E));M=I-m,T=S-C;var O=10,B=Math.min(O/M,O/T);f=[B,0,0,B,-Math.round(M/2+m)*B,-Math.round(T/2+C)*B]}return{type:"path",path:n,matrix:f}}function Me(a){var n,f=1,v="#000000",w='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?n=a:(n=a.text,f="scalar"in a?a.scalar:f,w="fontFamily"in a?a.fontFamily:w,v="color"in a?a.color:v);var _=10*f,b=""+_+"px "+w,m=new OffscreenCanvas(_,_),C=m.getContext("2d");C.font=b;var I=C.measureText(n),S=Math.ceil(I.actualBoundingBoxRight+I.actualBoundingBoxLeft),M=Math.ceil(I.actualBoundingBoxAscent+I.actualBoundingBoxDescent),T=2,x=I.actualBoundingBoxLeft+T,E=I.actualBoundingBoxAscent+T;S+=T+T,M+=T+T,m=new OffscreenCanvas(S,M),C=m.getContext("2d"),C.font=b,C.fillStyle=v,C.fillText(n,x,E);var O=1/f;return{type:"bitmap",bitmap:m.transferToImageBitmap(),matrix:[O,0,0,O,-S*O/2,-M*O/2]}}s.exports=function(){return Q().apply(this,arguments)},s.exports.reset=function(){Q().reset()},s.exports.create=Y,s.exports.shapeFromPath=Le,s.exports.shapeFromText=Me})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),X,!1);const G=X.exports;X.exports.create;const Ve={showScreen(e){["main-flow","result-screen","loading-screen"].forEach(l=>{const c=u(l);c&&c.classList.toggle("hidden",l!==e)});const s=u("footer-home"),o=u("footer-result"),r=u("app-footer");e==="main-flow"?(r&&r.classList.remove("hidden"),s&&s.classList.remove("hidden"),o&&o.classList.add("hidden")):e==="result-screen"?(r&&r.classList.remove("hidden"),s&&s.classList.add("hidden"),o&&o.classList.remove("hidden")):r&&r.classList.add("hidden")},updateStrings(e){const t=e.translations[e.currentLang],s={"location-title":t.locationTitle,"app-title":t.title,"app-subtitle":t.subtitle,"price-title":t.priceTitle,"filter-title":e.Config.filterMode==="whitelist"?t.filterModeWhitelist:t.filterModeBlacklist,"find-btn":t.findBtn,"retry-btn":t.retry,"back-btn":t.backBtn,"loading-text":t.loading,"open-maps-btn":t.openMaps,"share-btn":t.shareBtn,"install-btn":t.installBtn,"reviews-title":t.reviews,"view-all-reviews":t.viewAllReviews,"photos-title":t.photosTitle,"view-all-photos":t.viewAllPhotos};Object.entries(s).forEach(([i,g])=>{const p=u(i);p&&(p.textContent=g)});const o=u("location-input");o&&(o.placeholder=t.searchPlaceholder);const r=u("location-display");r&&!e.Data.manualLocation&&(r.textContent=t.useCurrentLocation);const l=u("distance-title");if(l){l.textContent="",l.appendChild(document.createTextNode(`${t.distanceTitle} (`));const i=document.createElement("span");i.id="distance-val",i.textContent=e.Config.mins,l.appendChild(i),l.appendChild(document.createTextNode(" mins)"))}const c=u("include-closed-btn");if(c){const i=e.Config.includeClosed;c.classList.toggle("active",i);const g=u("include-closed-label");g&&(g.textContent=i?t.includeClosed:t.excludeClosed)}const d=u("filter-mode-label");d&&(d.textContent=e.Config.filterMode==="whitelist"?t.filterToggleBlacklist:t.filterToggleWhitelist),document.querySelectorAll(".lang-selector span").forEach(i=>{i.classList.toggle("active",i.dataset.lang===e.currentLang)})},initFilters(e){const t=u("filter-list");if(!t)return;t.innerHTML="";const s=e.translations[e.currentLang].categories;Object.keys(s).forEach(o=>{const r=document.createElement("div");r.className=`filter-item ${e.Config.excluded.has(o)?"active":""}`,r.textContent=s[o],r.onclick=()=>{e.Config.excluded.has(o)?(e.Config.excluded.delete(o),r.classList.remove("active")):(e.Config.excluded.add(o),r.classList.add("active")),e.saveSettings(),this.triggerHaptic(W.HAPTIC_FEEDBACK_DURATION.SHORT)},t.appendChild(r)}),document.querySelectorAll(".price-item").forEach(o=>{const r=o.dataset.price;o.classList.toggle("active",e.Config.prices.has(r)),o.onclick=()=>{e.Config.prices.has(r)?(e.Config.prices.delete(r),o.classList.remove("active")):(e.Config.prices.add(r),o.classList.add("active")),e.saveSettings(),this.triggerHaptic(W.HAPTIC_FEEDBACK_DURATION.SHORT)}})},async showResult(e,t,s={}){const{fromShare:o=!1}=s;this.showScreen("result-screen"),e.Data.currentPlace=t,this.updateHistory(e,t);const r=this.getElements();if(this.renderHeader(r,t,o),this.renderPhotos(r,t),this.renderReviews(r,t),this.renderDetails(r,t,e),this.renderMap(r.mapCont,t,e),!o){this.triggerConfetti();const l=u("result-screen");l&&l.scrollIntoView({behavior:"smooth",block:"start"})}},updateHistory(e,t){e.Data.lastPickedId=t.id,e.Data.history||(e.Data.history=[]),e.Data.history.includes(t.id)||e.Data.history.push(t.id)},getElements(){return{name:u("res-name"),rating:u("res-rating"),ratingCont:u("res-rating-container"),price:u("res-price"),priceCont:u("res-price-container"),cat:u("res-category"),catIcon:u("res-category-icon"),catCont:u("res-category-container"),hours:u("res-hours"),hoursCont:u("res-hours-container"),address:u("res-address"),mapCont:u("res-map-container"),phone:u("res-phone"),distance:u("res-distance"),distanceCont:u("res-distance-container"),mapsBtn:u("open-maps-btn"),photoCont:u("res-photo-container"),photoSection:u("res-photo-section"),photosViewAll:u("view-all-photos"),reviewsViewAll:u("view-all-reviews"),reviewsCont:u("res-reviews-container"),reviewsList:u("reviews-list")}},renderHeader(e,t,s){e.name&&(e.name.textContent=t.name),e.address&&(e.address.textContent=t.vicinity),e.reviewsViewAll&&(e.reviewsViewAll.href=t.googleMapsURI||"#"),e.photosViewAll&&(e.photosViewAll.href=t.googleMapsURI||"#")},renderPhotos(e,t){if(e.photoSection)if(t.photos&&t.photos.length>0){if(e.photoSection.classList.remove("hidden"),e.photoCont){e.photoCont.innerHTML="";const s=document.createDocumentFragment();t.photos.forEach(o=>{const r=document.createElement("img");r.src=o.getURI({maxHeight:400}),r.className="photo-item",r.alt=t.name,r.loading="lazy",r.style.opacity="0",r.style.transition="opacity 0.3s ease",r.onload=()=>{r.style.opacity="1"},r.onerror=function(){this.getAttribute("data-retried")?this.style.display="none":(this.setAttribute("data-retried","true"),setTimeout(()=>{const l=this.src.includes("?")?"&":"?";this.src=this.src+l+"retry="+Date.now()},1e3))},r.onclick=()=>window.open(r.src,"_blank"),s.appendChild(r)}),e.photoCont.appendChild(s)}}else e.photoSection.classList.add("hidden")},renderReviews(e,t){if(!(!e.reviewsCont||!e.reviewsList))if(t.reviews&&t.reviews.length>0){e.reviewsCont.classList.remove("hidden"),e.reviewsList.innerHTML="",e.reviewsList.scrollLeft=0;const s=t.reviews.filter(o=>o.text&&(o.text.text||o.text).length>0).sort((o,r)=>{const l=o.publishTime?new Date(o.publishTime).getTime():0;return(r.publishTime?new Date(r.publishTime).getTime():0)-l});if(s.length===0)e.reviewsCont.classList.add("hidden");else{const o=document.createDocumentFragment();s.forEach(r=>{const l=document.createElement("div");l.className="review-item";const c="‚≠ê".repeat(Math.round(r.rating||0)),d=r.relativePublishTimeDescription||"",i=document.createElement("div");i.className="review-top";const g=document.createElement("span");g.className="review-author",g.textContent=r.authorAttribution?.displayName||"Anonymous";const p=document.createElement("span");p.className="review-time",p.textContent=d,i.appendChild(g),i.appendChild(p);const h=document.createElement("div");h.className="review-stars",h.textContent=c;const L=document.createElement("p");L.className="review-text",L.textContent=r.text?.text||r.text||"",l.appendChild(i),l.appendChild(h),l.appendChild(L),o.appendChild(l)}),e.reviewsList.appendChild(o)}}else e.reviewsCont.classList.add("hidden")},renderDetails(e,t,s){const o=s.translations[s.currentLang],r=typeof t.rating=="number"&&t.rating>0;e.rating&&(e.rating.textContent=r?t.rating:o.ratingNew.replace(/‚≠ê\s*/,""));const l=this.getPriceDisplay(t.priceLevel,o);e.price&&(e.price.textContent=l),e.priceCont&&(e.priceCont.style.display=l?"flex":"none");const c=this.getPlaceCategory(t,s);if(c){const i=c.match(new RegExp("^(\\p{Emoji_Presentation}|\\p{Emoji}\\uFE0F)\\s*(.*)$","u"));e.catIcon&&(e.catIcon.textContent=i?i[1]:"üç¥"),e.cat&&(e.cat.textContent=i?i[2]:c),e.catCont&&(e.catCont.style.display="flex")}else e.catCont&&(e.catCont.style.display="none");const d=this.getTodayHours(t,s);e.hours&&(e.hours.textContent=d),e.hoursCont&&(e.hoursCont.style.display="flex"),t.durationText?(e.distance&&(e.distance.textContent=t.durationText),e.distanceCont&&(e.distanceCont.style.display="flex")):e.distanceCont&&(e.distanceCont.style.display="none"),t.phone?e.phone&&(e.phone.textContent=`üìû ${t.phone}`,e.phone.href=`tel:${t.phone.replace(/\s+/g,"")}`,e.phone.style.display=""):e.phone&&(e.phone.style.display="none"),e.mapsBtn&&(e.mapsBtn.href=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t.name)}&query_place_id=${t.id}`)},async renderMap(e,t,s){if(e){if(!t.location){e.style.display="none";return}e.classList.add("skeleton"),e.style.display="block";try{const[{Map:o},{AdvancedMarkerElement:r}]=await Promise.all([google.maps.importLibrary("maps"),google.maps.importLibrary("marker")]),l=new o(e,{center:t.location,zoom:16,mapId:"DEMO_MAP_ID",disableDefaultUI:!1,mapTypeControl:!1,streetViewControl:!1,gestureHandling:"greedy",colorScheme:"FOLLOW_SYSTEM"});if(new r({map:l,position:t.location,title:t.name}),s.Data.userPos){const c=document.createElement("div");c.style.width="16px",c.style.height="16px",c.style.backgroundColor="#4285F4",c.style.border="2px solid white",c.style.borderRadius="50%",c.style.boxShadow="0 0 4px rgba(0,0,0,0.3)",new r({map:l,position:s.Data.userPos,title:"Your Location",content:c});const d=new google.maps.LatLngBounds;d.extend(t.location),d.extend(s.Data.userPos),l.fitBounds(d,50);const i=document.createElement("button");i.className="map-center-btn",i.innerHTML='<svg viewBox="0 0 24 24" width="22" height="22" fill="#666"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',i.title="Re-center Map",i.onclick=()=>{const g=new google.maps.LatLngBounds;g.extend(t.location),g.extend(s.Data.userPos),l.fitBounds(g,50)},l.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(i)}else{const c=document.createElement("button");c.className="map-center-btn",c.innerHTML='<svg viewBox="0 0 24 24" width="22" height="22" fill="#666"><path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/></svg>',c.title="Re-center Map",c.onclick=()=>{l.setCenter(t.location),l.setZoom(16)},l.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(c)}google.maps.event.addListenerOnce(l,"idle",()=>e.classList.remove("skeleton"))}catch(o){console.error("Map Render Error:",o),e.style.display="none"}}},startSlotAnimation(e){const t=u("slot-name");if(!t)return;let s=0;const o=setInterval(()=>{const r=e.Data.candidates[Math.floor(Math.random()*e.Data.candidates.length)];t.textContent=r?.name||"...",++s>15&&(clearInterval(o),fe(e))},100)},getPlaceCategory(e,t){const s=t.translations[t.currentLang].categories;for(const[o,r]of Object.entries($))if(se(e,r))return s[o];return null},getPriceDisplay(e,t){if(e==null)return"";let s=e;K[s]&&(s=K[s]);const o=oe[s];return o?o.label(t):""},getTodayHours(e,t){const s=t.translations[t.currentLang],o=e.openingHours?.weekdayDescriptions;if(!o||o.length!==7)return s.noHoursInfo;const r=new Date,l=r.toLocaleDateString(t.currentLang==="en"?"en-US":t.currentLang==="ja"?"ja-JP":"zh-HK",{weekday:"long"}),c=r.toLocaleDateString("en-US",{weekday:"long"}),d=o.find(i=>i.includes(l)||i.includes(c))||o[(r.getDay()+6)%7];if(d){const i=d.split(/: |Ôºö/);return i[1]?i[1].trim():d}return s.noHoursInfo},triggerHaptic(e){navigator.vibrate&&navigator.vibrate(e||W.HAPTIC_FEEDBACK_DURATION.SHORT)},triggerConfetti(){(G.create?G.create():G)({particleCount:150,spread:70,origin:{y:.6},colors:["#ff6b81","#ffd32a","#2ecc71","#3498db"]})},async shareCurrentPlace(e){const t=e.Data.currentPlace;if(!t)return;const s=e.translations[e.currentLang],o=`${window.location.origin}${window.location.pathname}?resId=${t.id}${e.Data.userPos?`&lat=${e.Data.userPos.lat}&lng=${e.Data.userPos.lng}`:""}`,r=s.shareText.replace("${name}",t.name);if(navigator.share)try{await navigator.share({title:t.name,text:r,url:o})}catch(l){console.log("Share failed",l)}else try{await navigator.clipboard.writeText(`${r}
${o}`),alert(s.linkCopied)}catch{alert(o)}}},je="modulepreload",$e=function(e){return"/"+e},re={},Ae=function(t,s,o){let r=Promise.resolve();if(s&&s.length>0){let g=function(p){return Promise.all(p.map(h=>Promise.resolve(h).then(L=>({status:"fulfilled",value:L}),L=>({status:"rejected",reason:L}))))};var c=g;document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=d?.nonce||d?.getAttribute("nonce");r=g(s.map(p=>{if(p=$e(p),p in re)return;re[p]=!0;const h=p.endsWith(".css"),L=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${L}`))return;const N=document.createElement("link");if(N.rel=h?"stylesheet":je,h||(N.as="script"),N.crossOrigin="",N.href=p,i&&N.setAttribute("nonce",i),document.head.appendChild(N),h)return new Promise((P,R)=>{N.addEventListener("load",P),N.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=d,window.dispatchEvent(i),!i.defaultPrevented)throw d}return r.then(d=>{for(const i of d||[])i.status==="rejected"&&l(i.reason);return t().catch(l)})};function qe(e={}){const{immediate:t=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:r,onRegisteredSW:l,onRegisterError:c}=e;let d,i;const g=async(h=!0)=>{await i};async function p(){if("serviceWorker"in navigator){if(d=await Ae(async()=>{const{Workbox:h}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:h}},[]).then(({Workbox:h})=>new h("/sw.js",{scope:"/",type:"classic"})).catch(h=>{c?.(h)}),!d)return;d.addEventListener("activated",h=>{(h.isUpdate||h.isExternal)&&window.location.reload()}),d.addEventListener("installed",h=>{h.isUpdate||o?.()}),d.register({immediate:t}).then(h=>{l?l("/sw.js",h):r?.(h)}).catch(h=>{c?.(h)})}}return i=p(),g}const Ge={deferredPrompt:null,translations:null,currentLang:null,init(e,t){this.translations=e,this.currentLang=t,"serviceWorker"in navigator&&qe({immediate:!0,onNeedRefresh(){console.log("New content available, will update on next launch.")},onOfflineReady(){console.log("App ready to work offline")}}),window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),this.deferredPrompt=o,u("install-container")&&!this.isIOS()&&u("install-container").classList.remove("hidden")}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,u("install-container")&&u("install-container").classList.add("hidden")});const s=u("install-btn");s&&(s.addEventListener("click",()=>this.handleInstall()),this.isIOS()&&!this.isStandalone()&&(u("install-container").classList.remove("hidden"),s.innerHTML=`<span>${e[t].iosInstallText}</span>`,s.classList.add("ios-guide")))},isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},isStandalone(){return window.navigator.standalone||window.matchMedia("(display-mode: standalone)").matches},async handleInstall(){if(this.isIOS()){this.translations&&this.currentLang&&alert(this.translations[this.currentLang].iosInstallAlert);return}if(!this.deferredPrompt)return;this.deferredPrompt.prompt();const{outcome:e}=await this.deferredPrompt.userChoice;this.deferredPrompt=null,u("install-container")&&u("install-container").classList.add("hidden")}},k={Config:{mins:parseInt(localStorage.getItem("currentMins")||W.DEFAULT_MINS.toString()),includeClosed:localStorage.getItem("includeClosed")==="true",get radius(){return this.mins*W.DEFAULT_SEARCH_RADIUS_MULTIPLIER},blacklist:new Set(JSON.parse(localStorage.getItem("blacklist")||localStorage.getItem("excludedTypes")||"[]")),whitelist:new Set(JSON.parse(localStorage.getItem("whitelist")||"[]")),get excluded(){return this.filterMode==="whitelist"?this.whitelist:this.blacklist},filterMode:localStorage.getItem("filterMode")||"blacklist",prices:new Set(JSON.parse(localStorage.getItem("selectedPrices")||'["1","2","3","4"]')),lang:(function(){let t=new URLSearchParams(window.location.search).get("lang")||localStorage.getItem("preferredLang");if(t&&(t.startsWith("zh")&&(t="zh"),t.startsWith("ja")&&(t="ja"),["zh","en","ja"].includes(t)))return t;const s=navigator.language||navigator.userLanguage;return s.startsWith("ja")?"ja":s.startsWith("zh")?"zh":"en"})()},Data:{userPos:null,manualLocation:null,candidates:[],currentPlace:null,lastPickedId:null,history:[],params:new URLSearchParams(window.location.search)},UI:Ve,PWA:Ge,translations:Oe,get currentLang(){return this.Config.lang},saveSettings(){localStorage.setItem("currentMins",this.Config.mins.toString()),localStorage.setItem("includeClosed",this.Config.includeClosed),localStorage.setItem("selectedPrices",JSON.stringify(Array.from(this.Config.prices))),localStorage.setItem("blacklist",JSON.stringify(Array.from(this.Config.blacklist))),localStorage.setItem("whitelist",JSON.stringify(Array.from(this.Config.whitelist))),localStorage.setItem("filterMode",this.Config.filterMode)},setLanguage(e){if(this.currentLang===e)return;localStorage.setItem("preferredLang",e),this.saveSettings();let t=window.location.pathname+"?lang="+e;!u("result-screen").classList.contains("hidden")&&this.Data.lastPickedId&&(t+="&resId="+this.Data.lastPickedId,this.Data.userPos&&(t+=`&lat=${this.Data.userPos.lat}&lng=${this.Data.userPos.lng}`)),window.location.href=t},init(){We(),this.UI.updateStrings(this),this.UI.initFilters(this),this.setupEventListeners(),this.PWA.init(this.translations,this.currentLang),ze(this),this.initLocationSearch()},async initLocationSearch(){const e=u("location-input"),t=u("location-bar"),s=u("location-display"),o=u("clear-location");if(!e||!t||!s||!o)return;const r=this.translations[this.currentLang];s.textContent=r.useCurrentLocation,t.onclick=c=>{c.target.closest(".clear-icon")||(t.classList.add("hidden"),e.classList.remove("hidden"),e.focus())};const l=()=>{setTimeout(()=>{e.classList.add("hidden"),t.classList.remove("hidden")},200)};e.onblur=l,o.onclick=c=>{c.stopPropagation(),this.Data.manualLocation=null,e.value="",s.textContent=r.useCurrentLocation,o.classList.add("hidden"),this.UI.triggerHaptic(30)};try{const{Autocomplete:c}=await google.maps.importLibrary("places"),d=new c(e,{fields:["geometry","name"],types:["geocode","establishment"]});d.addListener("place_changed",()=>{const i=d.getPlace();!i.geometry||!i.geometry.location||(this.Data.manualLocation={lat:i.geometry.location.lat(),lng:i.geometry.location.lng(),name:i.name},s.textContent="üìç "+i.name,o.classList.remove("hidden"),e.value=i.name,l(),this.UI.triggerHaptic(50))})}catch{}},setupEventListeners(){const e=u("find-btn");e&&(e.onclick=()=>le(this));const t=u("retry-btn");t&&(t.onclick=()=>fe(this));const s=u("share-btn");s&&(s.onclick=()=>this.UI.shareCurrentPlace(this));const o=u("back-btn");o&&(o.onclick=()=>this.UI.showScreen("main-flow")),document.querySelectorAll(".lang-selector span").forEach(d=>{d.onclick=()=>this.setLanguage(d.dataset.lang)});const r=u("distance-slider");r&&(r.value=this.Config.mins,r.oninput=function(){const d=parseInt(this.value);k.Config.mins=d,u("distance-val").textContent=d,k.saveSettings(),k.UI.triggerHaptic(10)});const l=u("include-closed-btn");l&&(l.onclick=()=>{k.Config.includeClosed=!k.Config.includeClosed,k.saveSettings(),k.UI.updateStrings(k),k.UI.triggerHaptic(W.HAPTIC_FEEDBACK_DURATION.SHORT)});const c=u("filter-mode-toggle");c&&(c.onclick=()=>{k.Config.filterMode=k.Config.filterMode==="blacklist"?"whitelist":"blacklist",k.saveSettings(),k.UI.updateStrings(k),k.UI.initFilters(k),k.UI.triggerHaptic(W.HAPTIC_FEEDBACK_DURATION.SHORT)})}};window.App=k;document.addEventListener("DOMContentLoaded",()=>{k.init()});
